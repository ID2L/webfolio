import{c as _,l as ae,r as b,ab as ve,k as qe,o as ke,h as c,ac as ze,z as xe,ad as Z,w as le,a2 as K,g as Y,ae as Ce,af as Be,ag as Ue,ah as pe,a3 as he,ai as Re,aj as Ne,ak as Te,y as Le,al as Pe,m as je,b as $e,am as Ie,an as Ee,Q as De,R as X,ao as Ae,d as Oe,J as Qe,U as Me,O as V,a6 as Ve,f as H,a9 as He,V as fe,aa as We}from"./index.f8cb58b3.js";import{A as ne,b as Ge,s as ee,g as Ke,c as Xe}from"./plugin-vue_export-helper.3c48c7fc.js";const Ye={ratio:[String,Number]};function Je(e,i){return _(()=>{const l=Number(e.ratio||(i!==void 0?i.value:void 0));return isNaN(l)!==!0&&l>0?{paddingBottom:`${100/l}%`}:null})}const Ze=1.7778;var wt=ae({name:"QImg",props:{...Ye,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:Ze},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:i,emit:l}){const a=b(e.initialRatio),u=Je(e,a),s=Y(),{registerTimeout:h,removeTimeout:w}=ve(),{registerTimeout:z,removeTimeout:R}=ve(),q=_(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),L=_(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),F=[b(null),b(q.value)],d=b(0),t=b(!1),f=b(!1),x=_(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),g=_(()=>({width:e.width,height:e.height})),r=_(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),k=_(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function $(){if(R(),e.loadingShowDelay===0){t.value=!0;return}z(()=>{t.value=!0},e.loadingShowDelay)}function T(){R(),t.value=!1}function v({target:o}){K(s)===!1&&(w(),a.value=o.naturalHeight===0?.5:o.naturalWidth/o.naturalHeight,y(o,1))}function y(o,C){C===1e3||K(s)===!0||(o.complete===!0?N(o):h(()=>{y(o,C+1)},50))}function N(o){K(s)!==!0&&(d.value=d.value^1,F[d.value].value=null,T(),o.getAttribute("__qerror")!=="true"&&(f.value=!1),l("load",o.currentSrc||o.src))}function m(o){w(),T(),f.value=!0,F[d.value].value=L.value,F[d.value^1].value=q.value,l("error",o)}function S(o){const C=F[o].value,j={key:"img_"+o,class:r.value,style:k.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...C};return d.value===o?Object.assign(j,{class:j.class+"current",onLoad:v,onError:m}):j.class+="loaded",c("div",{class:"q-img__container absolute-full",key:"img"+o},c("img",j))}function P(){return t.value===!1?c("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},xe(i[f.value===!0?"error":"default"])):c("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},i.loading!==void 0?i.loading():e.noSpinner===!0?void 0:[c(Z,{color:e.spinnerColor,size:e.spinnerSize})])}{let o=function(){le(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,C=>{w(),f.value=!1,C===null?(T(),F[d.value^1].value=q.value):$(),F[d.value].value=C},{immediate:!0})};qe.value===!0?ke(o):o()}return()=>{const o=[];return u.value!==null&&o.push(c("div",{key:"filler",style:u.value})),F[0].value!==null&&o.push(S(0)),F[1].value!==null&&o.push(S(1)),o.push(c(ze,{name:"q-transition--fade"},P)),c("div",{key:"main",class:x.value,style:g.value,role:"img","aria-label":e.alt},o)}}}),qt="/assets/logo_lite.2034ca3d.png";const et=e=>new ne(async i=>{const{data:l,error:a}=await e.from("webfolio_section").select(`*
                    , webfolio_section_content(*)`);if(a)throw a;return l}),tt=e=>new ne(async i=>{console.log("Into updateSectionContent with parameters",i);const{data:l,error:a}=await e.rpc("upsert_content",{query_section_slug:i.section_slug,language_tag:i.lang,new_content:i.content});if(a)throw a;return!0}),at=e=>new ne(async i=>{const{data:l,error:a}=await e.from("webfolio_section").upsert({slug:i.section_slug}).select();if(a)throw a;return l}),lt=e=>{const i=b(!1),l=Ge({queryKey:["sections",e,"fr"],queryFn:async()=>(await et(ee).call()).map(s=>{const{webfolio_section_content:h,...w}=s,z=Ke(h,"fr");return{...w,content:z}}).find(s=>s.slug===e)});return le(()=>l.data,async a=>{!a.value&&!i.value&&(i.value=!0,await at(ee).call({section_slug:e}))}),l};function kt(e){const{data:i,refetch:l}=lt(e);return{section:i,refetch:l,onValidate:async u=>{if(!i.value){console.warn("Section not found, cannot validate");return}try{await tt(ee).call({section_slug:i.value.slug,content:u,lang:"fr"})&&l()}catch(s){console.error(`Failed to update section with slug ${e}`,s)}}}}const nt={...Ce,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},ge=["B","KB","MB","GB","TB","PB"];function me(e,i=1){let l=0;for(;parseInt(e,10)>=1024&&l<ge.length-1;)e/=1024,++l;return`${e.toFixed(i)}${ge[l]}`}function ot(e,i,l){return l<=i?i:Math.min(l,Math.max(i,e))}function zt(e,i=2,l="0"){if(e==null)return e;const a=""+e;return a.length>=i?a:new Array(i-a.length+1).join(l)+a}const te=50,ye=2*te,Se=ye*Math.PI,rt=Math.round(Se*1e3)/1e3;var it=ae({name:"QCircularProgress",props:{...nt,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:i}){const{proxy:{$q:l}}=Y(),a=Be(e),u=_(()=>{const d=(l.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(l.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-d}deg)`:`rotate3d(0, 0, 1, ${d-90}deg)`}}),s=_(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),h=_(()=>ye/(1-e.thickness/2)),w=_(()=>`${h.value/2} ${h.value/2} ${h.value} ${h.value}`),z=_(()=>ot(e.value,e.min,e.max)),R=_(()=>e.max-e.min),q=_(()=>e.thickness/2*h.value),L=_(()=>{const d=(e.max-z.value)/R.value,t=e.rounded===!0&&z.value<e.max&&d<.25?q.value/2*(1-d/.25):0;return Se*d+t});function F({thickness:d,offset:t,color:f,cls:x,rounded:g}){return c("circle",{class:"q-circular-progress__"+x+(f!==void 0?` text-${f}`:""),style:s.value,fill:"transparent",stroke:"currentColor","stroke-width":d,"stroke-dasharray":rt,"stroke-dashoffset":t,"stroke-linecap":g,cx:h.value,cy:h.value,r:te})}return()=>{const d=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&d.push(c("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:te-q.value/2,cx:h.value,cy:h.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&d.push(F({cls:"track",thickness:q.value,offset:0,color:e.trackColor})),d.push(F({cls:"circle",thickness:q.value,offset:L.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const t=[c("svg",{class:"q-circular-progress__svg",style:u.value,viewBox:w.value,"aria-hidden":"true"},d)];return e.showValue===!0&&t.push(c("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},i.default!==void 0?i.default():[c("div",z.value)])),c("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:a.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:z.value},Ue(i.internal,t))}}});function Q(e,i,l,a){const u=[];return e.forEach(s=>{a(s)===!0?u.push(s):i.push({failedPropValidation:l,file:s})}),u}function G(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),he(e)}const ut={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},st=["rejected"];function ct({editable:e,dnd:i,getFileInput:l,addFilesToQueue:a}){const{props:u,emit:s,proxy:h}=Y(),w=b(null),z=_(()=>u.accept!==void 0?u.accept.split(",").map(r=>(r=r.trim(),r==="*"?"*/":(r.endsWith("/*")&&(r=r.slice(0,r.length-1)),r.toUpperCase()))):null),R=_(()=>parseInt(u.maxFiles,10)),q=_(()=>parseInt(u.maxTotalSize,10));function L(r){if(e.value)if(r!==Object(r)&&(r={target:null}),r.target!==null&&r.target.matches('input[type="file"]')===!0)r.clientX===0&&r.clientY===0&&pe(r);else{const k=l();k&&k!==r.target&&k.click(r)}}function F(r){e.value&&r&&a(null,r)}function d(r,k,$,T){let v=Array.from(k||r.target.files);const y=[],N=()=>{y.length!==0&&s("rejected",y)};if(u.accept!==void 0&&z.value.indexOf("*/")===-1&&(v=Q(v,y,"accept",m=>z.value.some(S=>m.type.toUpperCase().startsWith(S)||m.name.toUpperCase().endsWith(S))),v.length===0))return N();if(u.maxFileSize!==void 0){const m=parseInt(u.maxFileSize,10);if(v=Q(v,y,"max-file-size",S=>S.size<=m),v.length===0)return N()}if(u.multiple!==!0&&v.length!==0&&(v=[v[0]]),v.forEach(m=>{m.__key=m.webkitRelativePath+m.lastModified+m.name+m.size}),T===!0){const m=$.map(S=>S.__key);v=Q(v,y,"duplicate",S=>m.includes(S.__key)===!1)}if(v.length===0)return N();if(u.maxTotalSize!==void 0){let m=T===!0?$.reduce((S,P)=>S+P.size,0):0;if(v=Q(v,y,"max-total-size",S=>(m+=S.size,m<=q.value)),v.length===0)return N()}if(typeof u.filter=="function"){const m=u.filter(v);v=Q(v,y,"filter",S=>m.includes(S))}if(u.maxFiles!==void 0){let m=T===!0?$.length:0;if(v=Q(v,y,"max-files",()=>(m++,m<=R.value)),v.length===0)return N()}if(N(),v.length!==0)return v}function t(r){G(r),i.value!==!0&&(i.value=!0)}function f(r){he(r),(r.relatedTarget!==null||Re.is.safari!==!0?r.relatedTarget!==w.value:document.elementsFromPoint(r.clientX,r.clientY).includes(w.value)===!1)===!0&&(i.value=!1)}function x(r){G(r);const k=r.dataTransfer.files;k.length!==0&&a(null,k),i.value=!1}function g(r){if(i.value===!0)return c("div",{ref:w,class:`q-${r}__dnd absolute-full`,onDragenter:G,onDragover:G,onDragleave:f,onDrop:x})}return Object.assign(h,{pickFiles:L,addFiles:F}),{pickFiles:L,addFiles:F,onDragover:t,onDragleave:f,processFiles:d,getDndNode:g,maxFilesNumber:R,maxTotalSizeNumber:q}}function _e(e){return(e*100).toFixed(2)+"%"}const dt={...Ne,...ut,label:String,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,noThumbnails:Boolean,autoUpload:Boolean,hideUploadBtn:Boolean,disable:Boolean,readonly:Boolean},be=[...st,"start","finish","added","removed"];function vt(e,i){const l=Y(),{props:a,slots:u,emit:s,proxy:h}=l,{$q:w}=h,z=Te(a,w);function R(n,p,B){if(n.__status=p,p==="idle"){n.__uploaded=0,n.__progress=0,n.__sizeLabel=me(n.size),n.__progressLabel="0.00%";return}if(p==="failed"){h.$forceUpdate();return}n.__uploaded=p==="uploaded"?n.size:B,n.__progress=p==="uploaded"?1:Math.min(.9999,n.__uploaded/n.size),n.__progressLabel=_e(n.__progress),h.$forceUpdate()}const q=_(()=>a.disable!==!0&&a.readonly!==!0),L=b(!1),F=b(null),d=b(null),t={files:b([]),queuedFiles:b([]),uploadedFiles:b([]),uploadedSize:b(0),updateFileStatus:R,isAlive:()=>K(l)===!1},{pickFiles:f,addFiles:x,onDragover:g,onDragleave:r,processFiles:k,getDndNode:$,maxFilesNumber:T,maxTotalSizeNumber:v}=ct({editable:q,dnd:L,getFileInput:ie,addFilesToQueue:ue});Object.assign(t,e({props:a,slots:u,emit:s,helpers:t,exposeApi:n=>{Object.assign(t,n)}})),t.isBusy===void 0&&(t.isBusy=b(!1));const y=b(0),N=_(()=>y.value===0?0:t.uploadedSize.value/y.value),m=_(()=>_e(N.value)),S=_(()=>me(y.value)),P=_(()=>q.value===!0&&t.isUploading.value!==!0&&(a.multiple===!0||t.queuedFiles.value.length===0)&&(a.maxFiles===void 0||t.files.value.length<T.value)&&(a.maxTotalSize===void 0||y.value<v.value)),o=_(()=>q.value===!0&&t.isBusy.value!==!0&&t.isUploading.value!==!0&&t.queuedFiles.value.length!==0);Le(Pe,ce);const C=_(()=>"q-uploader column no-wrap"+(z.value===!0?" q-uploader--dark q-dark":"")+(a.bordered===!0?" q-uploader--bordered":"")+(a.square===!0?" q-uploader--square no-border-radius":"")+(a.flat===!0?" q-uploader--flat no-shadow":"")+(a.disable===!0?" disabled q-uploader--disable":"")+(L.value===!0?" q-uploader--dnd":"")),j=_(()=>"q-uploader__header"+(a.color!==void 0?` bg-${a.color}`:"")+(a.textColor!==void 0?` text-${a.textColor}`:""));le(t.isUploading,(n,p)=>{p===!1&&n===!0?s("start"):p===!0&&n===!1&&s("finish")});function A(){a.disable===!1&&(t.abort(),t.uploadedSize.value=0,y.value=0,re(),t.files.value=[],t.queuedFiles.value=[],t.uploadedFiles.value=[])}function I(){a.disable===!1&&oe(["uploaded"],()=>{t.uploadedFiles.value=[]})}function W(){oe(["idle","failed"],({size:n})=>{y.value-=n,t.queuedFiles.value=[]})}function oe(n,p){if(a.disable===!0)return;const B={files:[],size:0},E=t.files.value.filter(U=>n.indexOf(U.__status)===-1?!0:(B.size+=U.size,B.files.push(U),U.__img!==void 0&&window.URL.revokeObjectURL(U.__img.src),!1));B.files.length!==0&&(t.files.value=E,p(B),s("removed",B.files))}function J(n){a.disable||(n.__status==="uploaded"?t.uploadedFiles.value=t.uploadedFiles.value.filter(p=>p.__key!==n.__key):n.__status==="uploading"?n.__abort():y.value-=n.size,t.files.value=t.files.value.filter(p=>p.__key!==n.__key?!0:(p.__img!==void 0&&window.URL.revokeObjectURL(p.__img.src),!1)),t.queuedFiles.value=t.queuedFiles.value.filter(p=>p.__key!==n.__key),s("removed",[n]))}function re(){t.files.value.forEach(n=>{n.__img!==void 0&&window.URL.revokeObjectURL(n.__img.src)})}function ie(){return d.value||F.value.getElementsByClassName("q-uploader__input")[0]}function ue(n,p){const B=k(n,p,t.files.value,!0),E=ie();E!=null&&(E.value=""),B!==void 0&&(B.forEach(U=>{if(t.updateFileStatus(U,"idle"),y.value+=U.size,a.noThumbnails!==!0&&U.type.toUpperCase().startsWith("IMAGE")){const de=new Image;de.src=window.URL.createObjectURL(U),U.__img=de}}),t.files.value=t.files.value.concat(B),t.queuedFiles.value=t.queuedFiles.value.concat(B),s("added",B),a.autoUpload===!0&&t.upload())}function se(){o.value===!0&&t.upload()}function M(n,p,B){if(n===!0){const E={type:"a",key:p,icon:w.iconSet.uploader[p],flat:!0,dense:!0};let U;return p==="add"?(E.onClick=f,U=ce):E.onClick=B,c(X,E,U)}}function ce(){return c("input",{ref:d,class:"q-uploader__input overflow-hidden absolute-full",tabindex:-1,type:"file",title:"",accept:a.accept,multiple:a.multiple===!0?"multiple":void 0,capture:a.capture,onMousedown:pe,onClick:f,onChange:ue})}function Fe(){return u.header!==void 0?u.header(O):[c("div",{class:"q-uploader__header-content column"},[c("div",{class:"flex flex-center no-wrap q-gutter-xs"},[M(t.queuedFiles.value.length!==0,"removeQueue",W),M(t.uploadedFiles.value.length!==0,"removeUploaded",I),t.isUploading.value===!0?c(Z,{class:"q-uploader__spinner"}):null,c("div",{class:"col column justify-center"},[a.label!==void 0?c("div",{class:"q-uploader__title"},[a.label]):null,c("div",{class:"q-uploader__subtitle"},[S.value+" / "+m.value])]),M(P.value,"add"),M(a.hideUploadBtn===!1&&o.value===!0,"upload",t.upload),M(t.isUploading.value,"clear",t.abort)])])]}function we(){return u.list!==void 0?u.list(O):t.files.value.map(n=>c("div",{key:n.__key,class:"q-uploader__file relative-position"+(a.noThumbnails!==!0&&n.__img!==void 0?" q-uploader__file--img":"")+(n.__status==="failed"?" q-uploader__file--failed":n.__status==="uploaded"?" q-uploader__file--uploaded":""),style:a.noThumbnails!==!0&&n.__img!==void 0?{backgroundImage:'url("'+n.__img.src+'")'}:null},[c("div",{class:"q-uploader__file-header row flex-center no-wrap"},[n.__status==="failed"?c(De,{class:"q-uploader__file-status",name:w.iconSet.type.negative,color:"negative"}):null,c("div",{class:"q-uploader__file-header-content col"},[c("div",{class:"q-uploader__title"},[n.name]),c("div",{class:"q-uploader__subtitle row items-center no-wrap"},[n.__sizeLabel+" / "+n.__progressLabel])]),n.__status==="uploading"?c(it,{value:n.__progress,min:0,max:1,indeterminate:n.__progress===0}):c(X,{round:!0,dense:!0,flat:!0,icon:w.iconSet.uploader[n.__status==="uploaded"?"done":"clear"],onClick:()=>{J(n)}})])]))}je(()=>{t.isUploading.value===!0&&t.abort(),t.files.value.length!==0&&re()});const O={};for(const n in t)$e(t[n])===!0?Ie(O,n,()=>t[n].value):O[n]=t[n];return Object.assign(O,{upload:se,reset:A,removeUploadedFiles:I,removeQueuedFiles:W,removeFile:J,pickFiles:f,addFiles:x}),Ee(O,{canAddFiles:()=>P.value,canUpload:()=>o.value,uploadSizeLabel:()=>S.value,uploadProgressLabel:()=>m.value}),i({...t,upload:se,reset:A,removeUploadedFiles:I,removeQueuedFiles:W,removeFile:J,pickFiles:f,addFiles:x,canAddFiles:P,canUpload:o,uploadSizeLabel:S,uploadProgressLabel:m}),()=>{const n=[c("div",{class:j.value},Fe()),c("div",{class:"q-uploader__list scroll"},we()),$("uploader")];t.isBusy.value===!0&&n.push(c("div",{class:"q-uploader__overlay absolute-full flex flex-center"},[c(Z)]));const p={ref:F,class:C.value};return P.value===!0&&Object.assign(p,{onDragover:g,onDragleave:r}),c("div",p,n)}}const ft=Xe(be);var gt=({name:e,props:i,emits:l,injectPlugin:a})=>ae({name:e,props:{...dt,...i},emits:Ae(l)===!0?{...ft,...l}:[...be,...l],setup(u,{expose:s}){return vt(a,s)}});function D(e){return typeof e=="function"?e:()=>e}const mt="QUploader",_t={url:[Function,String],method:{type:[Function,String],default:"POST"},fieldName:{type:[Function,String],default:()=>e=>e.name},headers:[Function,Array],formFields:[Function,Array],withCredentials:[Function,Boolean],sendRaw:[Function,Boolean],batch:[Function,Boolean],factory:Function},pt=["factoryFailed","uploaded","failed","uploading"];function ht({props:e,emit:i,helpers:l}){const a=b([]),u=b([]),s=b(0),h=_(()=>({url:D(e.url),method:D(e.method),headers:D(e.headers),formFields:D(e.formFields),fieldName:D(e.fieldName),withCredentials:D(e.withCredentials),sendRaw:D(e.sendRaw),batch:D(e.batch)})),w=_(()=>s.value>0),z=_(()=>u.value.length!==0);let R;function q(){a.value.forEach(t=>{t.abort()}),u.value.length!==0&&(R=!0)}function L(){const t=l.queuedFiles.value.slice(0);l.queuedFiles.value=[],h.value.batch(t)?F(t):t.forEach(f=>{F([f])})}function F(t){if(s.value++,typeof e.factory!="function"){d(t,{});return}const f=e.factory(t);if(!f)i("factoryFailed",new Error("QUploader: factory() does not return properly"),t),s.value--;else if(typeof f.catch=="function"&&typeof f.then=="function"){u.value.push(f);const x=g=>{l.isAlive()===!0&&(u.value=u.value.filter(r=>r!==f),u.value.length===0&&(R=!1),l.queuedFiles.value=l.queuedFiles.value.concat(t),t.forEach(r=>{l.updateFileStatus(r,"failed")}),i("factoryFailed",g,t),s.value--)};f.then(g=>{R===!0?x(new Error("Aborted")):l.isAlive()===!0&&(u.value=u.value.filter(r=>r!==f),d(t,g))}).catch(x)}else d(t,f||{})}function d(t,f){const x=new FormData,g=new XMLHttpRequest,r=(o,C)=>f[o]!==void 0?D(f[o])(C):h.value[o](C),k=r("url",t);if(!k){console.error("q-uploader: invalid or no URL specified"),s.value--;return}const $=r("formFields",t);$!==void 0&&$.forEach(o=>{x.append(o.name,o.value)});let T=0,v=0,y=0,N=0,m;g.upload.addEventListener("progress",o=>{if(m===!0)return;const C=Math.min(N,o.loaded);l.uploadedSize.value+=C-y,y=C;let j=y-v;for(let A=T;j>0&&A<t.length;A++){const I=t[A];if(j>I.size)j-=I.size,T++,v+=I.size,l.updateFileStatus(I,"uploading",I.size);else{l.updateFileStatus(I,"uploading",j);return}}},!1),g.onreadystatechange=()=>{g.readyState<4||(g.status&&g.status<400?(l.uploadedFiles.value=l.uploadedFiles.value.concat(t),t.forEach(o=>{l.updateFileStatus(o,"uploaded")}),i("uploaded",{files:t,xhr:g})):(m=!0,l.uploadedSize.value-=y,l.queuedFiles.value=l.queuedFiles.value.concat(t),t.forEach(o=>{l.updateFileStatus(o,"failed")}),i("failed",{files:t,xhr:g})),s.value--,a.value=a.value.filter(o=>o!==g))},g.open(r("method",t),k),r("withCredentials",t)===!0&&(g.withCredentials=!0);const S=r("headers",t);S!==void 0&&S.forEach(o=>{g.setRequestHeader(o.name,o.value)});const P=r("sendRaw",t);t.forEach(o=>{l.updateFileStatus(o,"uploading",0),P!==!0&&x.append(r("fieldName",o),o,o.name),o.xhr=g,o.__abort=()=>{g.abort()},N+=o.size}),i("uploading",{files:t,xhr:g}),a.value.push(g),P===!0?g.send(new Blob(t)):g.send(x)}return{isUploading:w,isBusy:z,abort:q,upload:L}}var yt={name:mt,props:_t,emits:pt,injectPlugin:ht},St=gt(yt);const xt=Oe({__name:"PictureInput",emits:["upload","cancel"],setup(e,{emit:i}){const l=b(),a=i,u=()=>{l.value&&l.value.files.length>0&&(l.value?l.value.files:[]).length>0&&a("upload",l.value.files[0])};return(s,h)=>(Qe(),Me(Ve,null,{default:V(()=>[H(He,null,{default:V(()=>[H(St,{ref_key:"uploader",ref:l,class:"tw-w-full",label:"Download picture",accept:"image/*","auto-upload":!1,"hide-upload-btn":!0},null,512)]),_:1}),H(We,{align:"around"},{default:V(()=>[H(X,{color:"secondary",onClick:h[0]||(h[0]=w=>a("cancel"))},{default:V(()=>[fe(" Cancel ")]),_:1}),H(X,{color:"primary",onClick:u},{default:V(()=>[fe(" Validate ")]),_:1})]),_:1})]),_:1}))}});export{wt as Q,qt as _,xt as a,zt as p,kt as u};
