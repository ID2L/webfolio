var ni=Object.defineProperty;var ii=(r,e,t)=>e in r?ni(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var er=(r,e,t)=>(ii(r,typeof e!="symbol"?e+"":e,t),t),tr=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var b=(r,e,t)=>(tr(r,e,"read from private field"),t?t.call(r):e.get(r)),B=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},q=(r,e,t,s)=>(tr(r,e,"write to private field"),s?s.call(r,t):e.set(r,t),t);var W=(r,e,t)=>(tr(r,e,"access private method"),t);import{W as ai,r as As,c as kn,X as oi,i as ci,H as li,w as Os,Y as ui,Z as di,_ as hi,$ as wt,l as fi,y as pi,a0 as mi,a1 as gi,o as xn,h as _i,z as vi,g as yi,a2 as bi,a3 as zr,p as wi,a4 as ki,a5 as xi,d as Ti,J as Si,U as Ei,O as rt,a6 as Oi,f as nt,u as Ci,a7 as Ri,a8 as $i,a9 as Ii,R as Br,V as qr,aa as Ai}from"./index.f8cb58b3.js";import{S as ji,t as ur,r as Is,b as Pi,q as Fr,u as Jr,v as Ni,g as Li,w as Zi,x as Wr,n as Di,l as Ui,k as Mi,y as Hr,z as Gr}from"./utils.e9ae0538.js";var L;(function(r){r.assertEqual=n=>n;function e(n){}r.assertIs=e;function t(n){throw new Error}r.assertNever=t,r.arrayToEnum=n=>{const i={};for(const a of n)i[a]=a;return i},r.getValidEnumValues=n=>{const i=r.objectKeys(n).filter(o=>typeof n[n[o]]!="number"),a={};for(const o of i)a[o]=n[o];return r.objectValues(a)},r.objectValues=n=>r.objectKeys(n).map(function(i){return n[i]}),r.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{const i=[];for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&i.push(a);return i},r.find=(n,i)=>{for(const a of n)if(i(a))return a},r.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function s(n,i=" | "){return n.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}r.joinValues=s,r.jsonStringifyReplacer=(n,i)=>typeof i=="bigint"?i.toString():i})(L||(L={}));var dr;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(dr||(dr={}));const v=L.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),$e=r=>{switch(typeof r){case"undefined":return v.undefined;case"string":return v.string;case"number":return isNaN(r)?v.nan:v.number;case"boolean":return v.boolean;case"function":return v.function;case"bigint":return v.bigint;case"symbol":return v.symbol;case"object":return Array.isArray(r)?v.array:r===null?v.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?v.promise:typeof Map!="undefined"&&r instanceof Map?v.map:typeof Set!="undefined"&&r instanceof Set?v.set:typeof Date!="undefined"&&r instanceof Date?v.date:v.object;default:return v.unknown}},p=L.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Vi=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:");class ne extends Error{constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(i){return i.message},s={_errors:[]},n=i=>{for(const a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(n);else if(a.code==="invalid_return_type")n(a.returnTypeError);else if(a.code==="invalid_arguments")n(a.argumentsError);else if(a.path.length===0)s._errors.push(t(a));else{let o=s,c=0;for(;c<a.path.length;){const l=a.path[c];c===a.path.length-1?(o[l]=o[l]||{_errors:[]},o[l]._errors.push(t(a))):o[l]=o[l]||{_errors:[]},o=o[l],c++}}};return n(this),s}static assert(e){if(!(e instanceof ne))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,L.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},s=[];for(const n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):s.push(e(n));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}}ne.create=r=>new ne(r);const kt=(r,e)=>{let t;switch(r.code){case p.invalid_type:r.received===v.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case p.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,L.jsonStringifyReplacer)}`;break;case p.unrecognized_keys:t=`Unrecognized key(s) in object: ${L.joinValues(r.keys,", ")}`;break;case p.invalid_union:t="Invalid input";break;case p.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${L.joinValues(r.options)}`;break;case p.invalid_enum_value:t=`Invalid enum value. Expected ${L.joinValues(r.options)}, received '${r.received}'`;break;case p.invalid_arguments:t="Invalid function arguments";break;case p.invalid_return_type:t="Invalid function return type";break;case p.invalid_date:t="Invalid date";break;case p.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:L.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case p.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case p.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case p.custom:t="Invalid input";break;case p.invalid_intersection_types:t="Intersection results could not be merged";break;case p.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case p.not_finite:t="Number must be finite";break;default:t=e.defaultError,L.assertNever(r)}return{message:t}};let Tn=kt;function zi(r){Tn=r}function js(){return Tn}const Ps=r=>{const{data:e,path:t,errorMaps:s,issueData:n}=r,i=[...t,...n.path||[]],a={...n,path:i};if(n.message!==void 0)return{...n,path:i,message:n.message};let o="";const c=s.filter(l=>!!l).slice().reverse();for(const l of c)o=l(a,{data:e,defaultError:o}).message;return{...n,path:i,message:o}},Bi=[];function g(r,e){const t=js(),s=Ps({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,t,t===kt?void 0:kt].filter(n=>!!n)});r.common.issues.push(s)}class K{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const s=[];for(const n of t){if(n.status==="aborted")return E;n.status==="dirty"&&e.dirty(),s.push(n.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){const s=[];for(const n of t){const i=await n.key,a=await n.value;s.push({key:i,value:a})}return K.mergeObjectSync(e,s)}static mergeObjectSync(e,t){const s={};for(const n of t){const{key:i,value:a}=n;if(i.status==="aborted"||a.status==="aborted")return E;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof a.value!="undefined"||n.alwaysSet)&&(s[i.value]=a.value)}return{status:e.value,value:s}}}const E=Object.freeze({status:"aborted"}),dt=r=>({status:"dirty",value:r}),X=r=>({status:"valid",value:r}),hr=r=>r.status==="aborted",fr=r=>r.status==="dirty",Mt=r=>r.status==="valid",Vt=r=>typeof Promise!="undefined"&&r instanceof Promise;function Ns(r,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(r):s?s.value:e.get(r)}function Sn(r,e,t,s,n){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?n.call(r,t):n?n.value=t:e.set(r,t),t}var w;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(w||(w={}));var At,jt;class be{constructor(e,t,s,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=s,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Kr=(r,e)=>{if(Mt(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new ne(r.common.issues);return this._error=t,this._error}}};function R(r){if(!r)return{};const{errorMap:e,invalid_type_error:t,required_error:s,description:n}=r;if(e&&(t||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(a,o)=>{var c,l;const{message:u}=r;return a.code==="invalid_enum_value"?{message:u!=null?u:o.defaultError}:typeof o.data=="undefined"?{message:(c=u!=null?u:s)!==null&&c!==void 0?c:o.defaultError}:a.code!=="invalid_type"?{message:o.defaultError}:{message:(l=u!=null?u:t)!==null&&l!==void 0?l:o.defaultError}},description:n}}class I{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return $e(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:$e(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new K,ctx:{common:e.parent.common,data:e.data,parsedType:$e(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Vt(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const s=this.safeParse(e,t);if(s.success)return s.data;throw s.error}safeParse(e,t){var s;const n={common:{issues:[],async:(s=t==null?void 0:t.async)!==null&&s!==void 0?s:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$e(e)},i=this._parseSync({data:e,path:n.path,parent:n});return Kr(n,i)}async parseAsync(e,t){const s=await this.safeParseAsync(e,t);if(s.success)return s.data;throw s.error}async safeParseAsync(e,t){const s={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$e(e)},n=this._parse({data:e,path:s.path,parent:s}),i=await(Vt(n)?n:Promise.resolve(n));return Kr(s,i)}refine(e,t){const s=n=>typeof t=="string"||typeof t=="undefined"?{message:t}:typeof t=="function"?t(n):t;return this._refinement((n,i)=>{const a=e(n),o=()=>i.addIssue({code:p.custom,...s(n)});return typeof Promise!="undefined"&&a instanceof Promise?a.then(c=>c?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,t){return this._refinement((s,n)=>e(s)?!0:(n.addIssue(typeof t=="function"?t(s,n):t),!1))}_refinement(e){return new me({schema:this,typeName:x.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ve.create(this,this._def)}nullable(){return Ze.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return fe.create(this,this._def)}promise(){return Tt.create(this,this._def)}or(e){return Ft.create([this,e],this._def)}and(e){return Jt.create(this,e,this._def)}transform(e){return new me({...R(this._def),schema:this,typeName:x.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Qt({...R(this._def),innerType:this,defaultValue:t,typeName:x.ZodDefault})}brand(){return new jr({typeName:x.ZodBranded,type:this,...R(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Yt({...R(this._def),innerType:this,catchValue:t,typeName:x.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Ts.create(this,e)}readonly(){return Xt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const qi=/^c[^\s-]{8,}$/i,Fi=/^[0-9a-z]+$/,Ji=/^[0-9A-HJKMNP-TV-Z]{26}$/,Wi=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Hi=/^[a-z0-9_-]{21}$/i,Gi=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Ki=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Qi="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let sr;const Yi=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Xi=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ea=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,En="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ta=new RegExp(`^${En}$`);function On(r){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return r.precision?e=`${e}\\.\\d{${r.precision}}`:r.precision==null&&(e=`${e}(\\.\\d+)?`),e}function sa(r){return new RegExp(`^${On(r)}$`)}function Cn(r){let e=`${En}T${On(r)}`;const t=[];return t.push(r.local?"Z?":"Z"),r.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function ra(r,e){return!!((e==="v4"||!e)&&Yi.test(r)||(e==="v6"||!e)&&Xi.test(r))}class de extends I{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==v.string){const i=this._getOrReturnCtx(e);return g(i,{code:p.invalid_type,expected:v.string,received:i.parsedType}),E}const s=new K;let n;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(n=this._getOrReturnCtx(e,n),g(n,{code:p.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="max")e.data.length>i.value&&(n=this._getOrReturnCtx(e,n),g(n,{code:p.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="length"){const a=e.data.length>i.value,o=e.data.length<i.value;(a||o)&&(n=this._getOrReturnCtx(e,n),a?g(n,{code:p.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&g(n,{code:p.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),s.dirty())}else if(i.kind==="email")Ki.test(e.data)||(n=this._getOrReturnCtx(e,n),g(n,{validation:"email",code:p.invalid_string,message:i.message}),s.dirty());else if(i.kind==="emoji")sr||(sr=new RegExp(Qi,"u")),sr.test(e.data)||(n=this._getOrReturnCtx(e,n),g(n,{validation:"emoji",code:p.invalid_string,message:i.message}),s.dirty());else if(i.kind==="uuid")Wi.test(e.data)||(n=this._getOrReturnCtx(e,n),g(n,{validation:"uuid",code:p.invalid_string,message:i.message}),s.dirty());else if(i.kind==="nanoid")Hi.test(e.data)||(n=this._getOrReturnCtx(e,n),g(n,{validation:"nanoid",code:p.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid")qi.test(e.data)||(n=this._getOrReturnCtx(e,n),g(n,{validation:"cuid",code:p.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid2")Fi.test(e.data)||(n=this._getOrReturnCtx(e,n),g(n,{validation:"cuid2",code:p.invalid_string,message:i.message}),s.dirty());else if(i.kind==="ulid")Ji.test(e.data)||(n=this._getOrReturnCtx(e,n),g(n,{validation:"ulid",code:p.invalid_string,message:i.message}),s.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),g(n,{validation:"url",code:p.invalid_string,message:i.message}),s.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),g(n,{validation:"regex",code:p.invalid_string,message:i.message}),s.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(e,n),g(n,{code:p.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),s.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(n=this._getOrReturnCtx(e,n),g(n,{code:p.invalid_string,validation:{startsWith:i.value},message:i.message}),s.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(n=this._getOrReturnCtx(e,n),g(n,{code:p.invalid_string,validation:{endsWith:i.value},message:i.message}),s.dirty()):i.kind==="datetime"?Cn(i).test(e.data)||(n=this._getOrReturnCtx(e,n),g(n,{code:p.invalid_string,validation:"datetime",message:i.message}),s.dirty()):i.kind==="date"?ta.test(e.data)||(n=this._getOrReturnCtx(e,n),g(n,{code:p.invalid_string,validation:"date",message:i.message}),s.dirty()):i.kind==="time"?sa(i).test(e.data)||(n=this._getOrReturnCtx(e,n),g(n,{code:p.invalid_string,validation:"time",message:i.message}),s.dirty()):i.kind==="duration"?Gi.test(e.data)||(n=this._getOrReturnCtx(e,n),g(n,{validation:"duration",code:p.invalid_string,message:i.message}),s.dirty()):i.kind==="ip"?ra(e.data,i.version)||(n=this._getOrReturnCtx(e,n),g(n,{validation:"ip",code:p.invalid_string,message:i.message}),s.dirty()):i.kind==="base64"?ea.test(e.data)||(n=this._getOrReturnCtx(e,n),g(n,{validation:"base64",code:p.invalid_string,message:i.message}),s.dirty()):L.assertNever(i);return{status:s.value,value:e.data}}_regex(e,t,s){return this.refinement(n=>e.test(n),{validation:t,code:p.invalid_string,...w.errToObj(s)})}_addCheck(e){return new de({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...w.errToObj(e)})}url(e){return this._addCheck({kind:"url",...w.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...w.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...w.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...w.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...w.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...w.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...w.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...w.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...w.errToObj(e)})}datetime(e){var t,s;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(s=e==null?void 0:e.local)!==null&&s!==void 0?s:!1,...w.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision,...w.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...w.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...w.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...w.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...w.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...w.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...w.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...w.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...w.errToObj(t)})}nonempty(e){return this.min(1,w.errToObj(e))}trim(){return new de({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new de({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new de({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}de.create=r=>{var e;return new de({checks:[],typeName:x.ZodString,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...R(r)})};function na(r,e){const t=(r.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,n=t>s?t:s,i=parseInt(r.toFixed(n).replace(".","")),a=parseInt(e.toFixed(n).replace(".",""));return i%a/Math.pow(10,n)}class Pe extends I{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==v.number){const i=this._getOrReturnCtx(e);return g(i,{code:p.invalid_type,expected:v.number,received:i.parsedType}),E}let s;const n=new K;for(const i of this._def.checks)i.kind==="int"?L.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),g(s,{code:p.invalid_type,expected:"integer",received:"float",message:i.message}),n.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(s=this._getOrReturnCtx(e,s),g(s,{code:p.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(s=this._getOrReturnCtx(e,s),g(s,{code:p.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="multipleOf"?na(e.data,i.value)!==0&&(s=this._getOrReturnCtx(e,s),g(s,{code:p.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),g(s,{code:p.not_finite,message:i.message}),n.dirty()):L.assertNever(i);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,w.toString(t))}gt(e,t){return this.setLimit("min",e,!1,w.toString(t))}lte(e,t){return this.setLimit("max",e,!0,w.toString(t))}lt(e,t){return this.setLimit("max",e,!1,w.toString(t))}setLimit(e,t,s,n){return new Pe({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:w.toString(n)}]})}_addCheck(e){return new Pe({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:w.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:w.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:w.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:w.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:w.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:w.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:w.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:w.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:w.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&L.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(t===null||s.value>t)&&(t=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Pe.create=r=>new Pe({checks:[],typeName:x.ZodNumber,coerce:(r==null?void 0:r.coerce)||!1,...R(r)});class Ne extends I{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==v.bigint){const i=this._getOrReturnCtx(e);return g(i,{code:p.invalid_type,expected:v.bigint,received:i.parsedType}),E}let s;const n=new K;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(s=this._getOrReturnCtx(e,s),g(s,{code:p.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(s=this._getOrReturnCtx(e,s),g(s,{code:p.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),g(s,{code:p.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):L.assertNever(i);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,w.toString(t))}gt(e,t){return this.setLimit("min",e,!1,w.toString(t))}lte(e,t){return this.setLimit("max",e,!0,w.toString(t))}lt(e,t){return this.setLimit("max",e,!1,w.toString(t))}setLimit(e,t,s,n){return new Ne({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:w.toString(n)}]})}_addCheck(e){return new Ne({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:w.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:w.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:w.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:w.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:w.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Ne.create=r=>{var e;return new Ne({checks:[],typeName:x.ZodBigInt,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...R(r)})};class zt extends I{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==v.boolean){const s=this._getOrReturnCtx(e);return g(s,{code:p.invalid_type,expected:v.boolean,received:s.parsedType}),E}return X(e.data)}}zt.create=r=>new zt({typeName:x.ZodBoolean,coerce:(r==null?void 0:r.coerce)||!1,...R(r)});class Ye extends I{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==v.date){const i=this._getOrReturnCtx(e);return g(i,{code:p.invalid_type,expected:v.date,received:i.parsedType}),E}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return g(i,{code:p.invalid_date}),E}const s=new K;let n;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(n=this._getOrReturnCtx(e,n),g(n,{code:p.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),s.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(n=this._getOrReturnCtx(e,n),g(n,{code:p.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),s.dirty()):L.assertNever(i);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ye({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:w.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:w.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Ye.create=r=>new Ye({checks:[],coerce:(r==null?void 0:r.coerce)||!1,typeName:x.ZodDate,...R(r)});class Ls extends I{_parse(e){if(this._getType(e)!==v.symbol){const s=this._getOrReturnCtx(e);return g(s,{code:p.invalid_type,expected:v.symbol,received:s.parsedType}),E}return X(e.data)}}Ls.create=r=>new Ls({typeName:x.ZodSymbol,...R(r)});class Bt extends I{_parse(e){if(this._getType(e)!==v.undefined){const s=this._getOrReturnCtx(e);return g(s,{code:p.invalid_type,expected:v.undefined,received:s.parsedType}),E}return X(e.data)}}Bt.create=r=>new Bt({typeName:x.ZodUndefined,...R(r)});class qt extends I{_parse(e){if(this._getType(e)!==v.null){const s=this._getOrReturnCtx(e);return g(s,{code:p.invalid_type,expected:v.null,received:s.parsedType}),E}return X(e.data)}}qt.create=r=>new qt({typeName:x.ZodNull,...R(r)});class xt extends I{constructor(){super(...arguments),this._any=!0}_parse(e){return X(e.data)}}xt.create=r=>new xt({typeName:x.ZodAny,...R(r)});class Ke extends I{constructor(){super(...arguments),this._unknown=!0}_parse(e){return X(e.data)}}Ke.create=r=>new Ke({typeName:x.ZodUnknown,...R(r)});class Ee extends I{_parse(e){const t=this._getOrReturnCtx(e);return g(t,{code:p.invalid_type,expected:v.never,received:t.parsedType}),E}}Ee.create=r=>new Ee({typeName:x.ZodNever,...R(r)});class Zs extends I{_parse(e){if(this._getType(e)!==v.undefined){const s=this._getOrReturnCtx(e);return g(s,{code:p.invalid_type,expected:v.void,received:s.parsedType}),E}return X(e.data)}}Zs.create=r=>new Zs({typeName:x.ZodVoid,...R(r)});class fe extends I{_parse(e){const{ctx:t,status:s}=this._processInputParams(e),n=this._def;if(t.parsedType!==v.array)return g(t,{code:p.invalid_type,expected:v.array,received:t.parsedType}),E;if(n.exactLength!==null){const a=t.data.length>n.exactLength.value,o=t.data.length<n.exactLength.value;(a||o)&&(g(t,{code:a?p.too_big:p.too_small,minimum:o?n.exactLength.value:void 0,maximum:a?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),s.dirty())}if(n.minLength!==null&&t.data.length<n.minLength.value&&(g(t,{code:p.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),s.dirty()),n.maxLength!==null&&t.data.length>n.maxLength.value&&(g(t,{code:p.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((a,o)=>n.type._parseAsync(new be(t,a,t.path,o)))).then(a=>K.mergeArray(s,a));const i=[...t.data].map((a,o)=>n.type._parseSync(new be(t,a,t.path,o)));return K.mergeArray(s,i)}get element(){return this._def.type}min(e,t){return new fe({...this._def,minLength:{value:e,message:w.toString(t)}})}max(e,t){return new fe({...this._def,maxLength:{value:e,message:w.toString(t)}})}length(e,t){return new fe({...this._def,exactLength:{value:e,message:w.toString(t)}})}nonempty(e){return this.min(1,e)}}fe.create=(r,e)=>new fe({type:r,minLength:null,maxLength:null,exactLength:null,typeName:x.ZodArray,...R(e)});function ct(r){if(r instanceof F){const e={};for(const t in r.shape){const s=r.shape[t];e[t]=ve.create(ct(s))}return new F({...r._def,shape:()=>e})}else return r instanceof fe?new fe({...r._def,type:ct(r.element)}):r instanceof ve?ve.create(ct(r.unwrap())):r instanceof Ze?Ze.create(ct(r.unwrap())):r instanceof we?we.create(r.items.map(e=>ct(e))):r}class F extends I{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=L.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==v.object){const l=this._getOrReturnCtx(e);return g(l,{code:p.invalid_type,expected:v.object,received:l.parsedType}),E}const{status:s,ctx:n}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof Ee&&this._def.unknownKeys==="strip"))for(const l in n.data)a.includes(l)||o.push(l);const c=[];for(const l of a){const u=i[l],d=n.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new be(n,d,n.path,l)),alwaysSet:l in n.data})}if(this._def.catchall instanceof Ee){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of o)c.push({key:{status:"valid",value:u},value:{status:"valid",value:n.data[u]}});else if(l==="strict")o.length>0&&(g(n,{code:p.unrecognized_keys,keys:o}),s.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of o){const d=n.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new be(n,d,n.path,u)),alwaysSet:u in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key,f=await u.value;l.push({key:d,value:f,alwaysSet:u.alwaysSet})}return l}).then(l=>K.mergeObjectSync(s,l)):K.mergeObjectSync(s,c)}get shape(){return this._def.shape()}strict(e){return w.errToObj,new F({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,s)=>{var n,i,a,o;const c=(a=(i=(n=this._def).errorMap)===null||i===void 0?void 0:i.call(n,t,s).message)!==null&&a!==void 0?a:s.defaultError;return t.code==="unrecognized_keys"?{message:(o=w.errToObj(e).message)!==null&&o!==void 0?o:c}:{message:c}}}:{}})}strip(){return new F({...this._def,unknownKeys:"strip"})}passthrough(){return new F({...this._def,unknownKeys:"passthrough"})}extend(e){return new F({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new F({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:x.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new F({...this._def,catchall:e})}pick(e){const t={};return L.objectKeys(e).forEach(s=>{e[s]&&this.shape[s]&&(t[s]=this.shape[s])}),new F({...this._def,shape:()=>t})}omit(e){const t={};return L.objectKeys(this.shape).forEach(s=>{e[s]||(t[s]=this.shape[s])}),new F({...this._def,shape:()=>t})}deepPartial(){return ct(this)}partial(e){const t={};return L.objectKeys(this.shape).forEach(s=>{const n=this.shape[s];e&&!e[s]?t[s]=n:t[s]=n.optional()}),new F({...this._def,shape:()=>t})}required(e){const t={};return L.objectKeys(this.shape).forEach(s=>{if(e&&!e[s])t[s]=this.shape[s];else{let i=this.shape[s];for(;i instanceof ve;)i=i._def.innerType;t[s]=i}}),new F({...this._def,shape:()=>t})}keyof(){return Rn(L.objectKeys(this.shape))}}F.create=(r,e)=>new F({shape:()=>r,unknownKeys:"strip",catchall:Ee.create(),typeName:x.ZodObject,...R(e)});F.strictCreate=(r,e)=>new F({shape:()=>r,unknownKeys:"strict",catchall:Ee.create(),typeName:x.ZodObject,...R(e)});F.lazycreate=(r,e)=>new F({shape:r,unknownKeys:"strip",catchall:Ee.create(),typeName:x.ZodObject,...R(e)});class Ft extends I{_parse(e){const{ctx:t}=this._processInputParams(e),s=this._def.options;function n(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;const a=i.map(o=>new ne(o.ctx.common.issues));return g(t,{code:p.invalid_union,unionErrors:a}),E}if(t.common.async)return Promise.all(s.map(async i=>{const a={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:a}),ctx:a}})).then(n);{let i;const a=[];for(const c of s){const l={...t,common:{...t.common,issues:[]},parent:null},u=c._parseSync({data:t.data,path:t.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&a.push(l.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const o=a.map(c=>new ne(c));return g(t,{code:p.invalid_union,unionErrors:o}),E}}get options(){return this._def.options}}Ft.create=(r,e)=>new Ft({options:r,typeName:x.ZodUnion,...R(e)});const Te=r=>r instanceof Ht?Te(r.schema):r instanceof me?Te(r.innerType()):r instanceof Gt?[r.value]:r instanceof Le?r.options:r instanceof Kt?L.objectValues(r.enum):r instanceof Qt?Te(r._def.innerType):r instanceof Bt?[void 0]:r instanceof qt?[null]:r instanceof ve?[void 0,...Te(r.unwrap())]:r instanceof Ze?[null,...Te(r.unwrap())]:r instanceof jr||r instanceof Xt?Te(r.unwrap()):r instanceof Yt?Te(r._def.innerType):[];class Hs extends I{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==v.object)return g(t,{code:p.invalid_type,expected:v.object,received:t.parsedType}),E;const s=this.discriminator,n=t.data[s],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(g(t,{code:p.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),E)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,s){const n=new Map;for(const i of t){const a=Te(i.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of a){if(n.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);n.set(o,i)}}return new Hs({typeName:x.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...R(s)})}}function pr(r,e){const t=$e(r),s=$e(e);if(r===e)return{valid:!0,data:r};if(t===v.object&&s===v.object){const n=L.objectKeys(e),i=L.objectKeys(r).filter(o=>n.indexOf(o)!==-1),a={...r,...e};for(const o of i){const c=pr(r[o],e[o]);if(!c.valid)return{valid:!1};a[o]=c.data}return{valid:!0,data:a}}else if(t===v.array&&s===v.array){if(r.length!==e.length)return{valid:!1};const n=[];for(let i=0;i<r.length;i++){const a=r[i],o=e[i],c=pr(a,o);if(!c.valid)return{valid:!1};n.push(c.data)}return{valid:!0,data:n}}else return t===v.date&&s===v.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}class Jt extends I{_parse(e){const{status:t,ctx:s}=this._processInputParams(e),n=(i,a)=>{if(hr(i)||hr(a))return E;const o=pr(i.value,a.value);return o.valid?((fr(i)||fr(a))&&t.dirty(),{status:t.value,value:o.data}):(g(s,{code:p.invalid_intersection_types}),E)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([i,a])=>n(i,a)):n(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}Jt.create=(r,e,t)=>new Jt({left:r,right:e,typeName:x.ZodIntersection,...R(t)});class we extends I{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==v.array)return g(s,{code:p.invalid_type,expected:v.array,received:s.parsedType}),E;if(s.data.length<this._def.items.length)return g(s,{code:p.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),E;!this._def.rest&&s.data.length>this._def.items.length&&(g(s,{code:p.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...s.data].map((a,o)=>{const c=this._def.items[o]||this._def.rest;return c?c._parse(new be(s,a,s.path,o)):null}).filter(a=>!!a);return s.common.async?Promise.all(i).then(a=>K.mergeArray(t,a)):K.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new we({...this._def,rest:e})}}we.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new we({items:r,typeName:x.ZodTuple,rest:null,...R(e)})};class Wt extends I{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==v.object)return g(s,{code:p.invalid_type,expected:v.object,received:s.parsedType}),E;const n=[],i=this._def.keyType,a=this._def.valueType;for(const o in s.data)n.push({key:i._parse(new be(s,o,s.path,o)),value:a._parse(new be(s,s.data[o],s.path,o)),alwaysSet:o in s.data});return s.common.async?K.mergeObjectAsync(t,n):K.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,s){return t instanceof I?new Wt({keyType:e,valueType:t,typeName:x.ZodRecord,...R(s)}):new Wt({keyType:de.create(),valueType:e,typeName:x.ZodRecord,...R(t)})}}class Ds extends I{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==v.map)return g(s,{code:p.invalid_type,expected:v.map,received:s.parsedType}),E;const n=this._def.keyType,i=this._def.valueType,a=[...s.data.entries()].map(([o,c],l)=>({key:n._parse(new be(s,o,s.path,[l,"key"])),value:i._parse(new be(s,c,s.path,[l,"value"]))}));if(s.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of a){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return E;(l.status==="dirty"||u.status==="dirty")&&t.dirty(),o.set(l.value,u.value)}return{status:t.value,value:o}})}else{const o=new Map;for(const c of a){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return E;(l.status==="dirty"||u.status==="dirty")&&t.dirty(),o.set(l.value,u.value)}return{status:t.value,value:o}}}}Ds.create=(r,e,t)=>new Ds({valueType:e,keyType:r,typeName:x.ZodMap,...R(t)});class Xe extends I{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==v.set)return g(s,{code:p.invalid_type,expected:v.set,received:s.parsedType}),E;const n=this._def;n.minSize!==null&&s.data.size<n.minSize.value&&(g(s,{code:p.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),n.maxSize!==null&&s.data.size>n.maxSize.value&&(g(s,{code:p.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const i=this._def.valueType;function a(c){const l=new Set;for(const u of c){if(u.status==="aborted")return E;u.status==="dirty"&&t.dirty(),l.add(u.value)}return{status:t.value,value:l}}const o=[...s.data.values()].map((c,l)=>i._parse(new be(s,c,s.path,l)));return s.common.async?Promise.all(o).then(c=>a(c)):a(o)}min(e,t){return new Xe({...this._def,minSize:{value:e,message:w.toString(t)}})}max(e,t){return new Xe({...this._def,maxSize:{value:e,message:w.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Xe.create=(r,e)=>new Xe({valueType:r,minSize:null,maxSize:null,typeName:x.ZodSet,...R(e)});class pt extends I{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==v.function)return g(t,{code:p.invalid_type,expected:v.function,received:t.parsedType}),E;function s(o,c){return Ps({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,js(),kt].filter(l=>!!l),issueData:{code:p.invalid_arguments,argumentsError:c}})}function n(o,c){return Ps({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,js(),kt].filter(l=>!!l),issueData:{code:p.invalid_return_type,returnTypeError:c}})}const i={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof Tt){const o=this;return X(async function(...c){const l=new ne([]),u=await o._def.args.parseAsync(c,i).catch(h=>{throw l.addIssue(s(c,h)),l}),d=await Reflect.apply(a,this,u);return await o._def.returns._def.type.parseAsync(d,i).catch(h=>{throw l.addIssue(n(d,h)),l})})}else{const o=this;return X(function(...c){const l=o._def.args.safeParse(c,i);if(!l.success)throw new ne([s(c,l.error)]);const u=Reflect.apply(a,this,l.data),d=o._def.returns.safeParse(u,i);if(!d.success)throw new ne([n(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new pt({...this._def,args:we.create(e).rest(Ke.create())})}returns(e){return new pt({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,s){return new pt({args:e||we.create([]).rest(Ke.create()),returns:t||Ke.create(),typeName:x.ZodFunction,...R(s)})}}class Ht extends I{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Ht.create=(r,e)=>new Ht({getter:r,typeName:x.ZodLazy,...R(e)});class Gt extends I{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return g(t,{received:t.data,code:p.invalid_literal,expected:this._def.value}),E}return{status:"valid",value:e.data}}get value(){return this._def.value}}Gt.create=(r,e)=>new Gt({value:r,typeName:x.ZodLiteral,...R(e)});function Rn(r,e){return new Le({values:r,typeName:x.ZodEnum,...R(e)})}class Le extends I{constructor(){super(...arguments),At.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),s=this._def.values;return g(t,{expected:L.joinValues(s),received:t.parsedType,code:p.invalid_type}),E}if(Ns(this,At,"f")||Sn(this,At,new Set(this._def.values),"f"),!Ns(this,At,"f").has(e.data)){const t=this._getOrReturnCtx(e),s=this._def.values;return g(t,{received:t.data,code:p.invalid_enum_value,options:s}),E}return X(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Le.create(e,{...this._def,...t})}exclude(e,t=this._def){return Le.create(this.options.filter(s=>!e.includes(s)),{...this._def,...t})}}At=new WeakMap;Le.create=Rn;class Kt extends I{constructor(){super(...arguments),jt.set(this,void 0)}_parse(e){const t=L.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==v.string&&s.parsedType!==v.number){const n=L.objectValues(t);return g(s,{expected:L.joinValues(n),received:s.parsedType,code:p.invalid_type}),E}if(Ns(this,jt,"f")||Sn(this,jt,new Set(L.getValidEnumValues(this._def.values)),"f"),!Ns(this,jt,"f").has(e.data)){const n=L.objectValues(t);return g(s,{received:s.data,code:p.invalid_enum_value,options:n}),E}return X(e.data)}get enum(){return this._def.values}}jt=new WeakMap;Kt.create=(r,e)=>new Kt({values:r,typeName:x.ZodNativeEnum,...R(e)});class Tt extends I{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==v.promise&&t.common.async===!1)return g(t,{code:p.invalid_type,expected:v.promise,received:t.parsedType}),E;const s=t.parsedType===v.promise?t.data:Promise.resolve(t.data);return X(s.then(n=>this._def.type.parseAsync(n,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Tt.create=(r,e)=>new Tt({type:r,typeName:x.ZodPromise,...R(e)});class me extends I{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===x.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:s}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:a=>{g(s,a),a.fatal?t.abort():t.dirty()},get path(){return s.path}};if(i.addIssue=i.addIssue.bind(i),n.type==="preprocess"){const a=n.transform(s.data,i);if(s.common.async)return Promise.resolve(a).then(async o=>{if(t.value==="aborted")return E;const c=await this._def.schema._parseAsync({data:o,path:s.path,parent:s});return c.status==="aborted"?E:c.status==="dirty"||t.value==="dirty"?dt(c.value):c});{if(t.value==="aborted")return E;const o=this._def.schema._parseSync({data:a,path:s.path,parent:s});return o.status==="aborted"?E:o.status==="dirty"||t.value==="dirty"?dt(o.value):o}}if(n.type==="refinement"){const a=o=>{const c=n.refinement(o,i);if(s.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return o.status==="aborted"?E:(o.status==="dirty"&&t.dirty(),a(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>o.status==="aborted"?E:(o.status==="dirty"&&t.dirty(),a(o.value).then(()=>({status:t.value,value:o.value}))))}if(n.type==="transform")if(s.common.async===!1){const a=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!Mt(a))return a;const o=n.transform(a.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(a=>Mt(a)?Promise.resolve(n.transform(a.value,i)).then(o=>({status:t.value,value:o})):a);L.assertNever(n)}}me.create=(r,e,t)=>new me({schema:r,typeName:x.ZodEffects,effect:e,...R(t)});me.createWithPreprocess=(r,e,t)=>new me({schema:e,effect:{type:"preprocess",transform:r},typeName:x.ZodEffects,...R(t)});class ve extends I{_parse(e){return this._getType(e)===v.undefined?X(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ve.create=(r,e)=>new ve({innerType:r,typeName:x.ZodOptional,...R(e)});class Ze extends I{_parse(e){return this._getType(e)===v.null?X(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ze.create=(r,e)=>new Ze({innerType:r,typeName:x.ZodNullable,...R(e)});class Qt extends I{_parse(e){const{ctx:t}=this._processInputParams(e);let s=t.data;return t.parsedType===v.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Qt.create=(r,e)=>new Qt({innerType:r,typeName:x.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...R(e)});class Yt extends I{_parse(e){const{ctx:t}=this._processInputParams(e),s={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return Vt(n)?n.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ne(s.common.issues)},input:s.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new ne(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}Yt.create=(r,e)=>new Yt({innerType:r,typeName:x.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...R(e)});class Us extends I{_parse(e){if(this._getType(e)!==v.nan){const s=this._getOrReturnCtx(e);return g(s,{code:p.invalid_type,expected:v.nan,received:s.parsedType}),E}return{status:"valid",value:e.data}}}Us.create=r=>new Us({typeName:x.ZodNaN,...R(r)});const ia=Symbol("zod_brand");class jr extends I{_parse(e){const{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}}class Ts extends I{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?E:i.status==="dirty"?(t.dirty(),dt(i.value)):this._def.out._parseAsync({data:i.value,path:s.path,parent:s})})();{const n=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?E:n.status==="dirty"?(t.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:s.path,parent:s})}}static create(e,t){return new Ts({in:e,out:t,typeName:x.ZodPipeline})}}class Xt extends I{_parse(e){const t=this._def.innerType._parse(e),s=n=>(Mt(n)&&(n.value=Object.freeze(n.value)),n);return Vt(t)?t.then(n=>s(n)):s(t)}unwrap(){return this._def.innerType}}Xt.create=(r,e)=>new Xt({innerType:r,typeName:x.ZodReadonly,...R(e)});function $n(r,e={},t){return r?xt.create().superRefine((s,n)=>{var i,a;if(!r(s)){const o=typeof e=="function"?e(s):typeof e=="string"?{message:e}:e,c=(a=(i=o.fatal)!==null&&i!==void 0?i:t)!==null&&a!==void 0?a:!0,l=typeof o=="string"?{message:o}:o;n.addIssue({code:"custom",...l,fatal:c})}}):xt.create()}const aa={object:F.lazycreate};var x;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(x||(x={}));const oa=(r,e={message:`Input not instance of ${r.name}`})=>$n(t=>t instanceof r,e),In=de.create,An=Pe.create,ca=Us.create,la=Ne.create,jn=zt.create,ua=Ye.create,da=Ls.create,ha=Bt.create,fa=qt.create,pa=xt.create,ma=Ke.create,ga=Ee.create,_a=Zs.create,va=fe.create,ya=F.create,ba=F.strictCreate,wa=Ft.create,ka=Hs.create,xa=Jt.create,Ta=we.create,Sa=Wt.create,Ea=Ds.create,Oa=Xe.create,Ca=pt.create,Ra=Ht.create,$a=Gt.create,Ia=Le.create,Aa=Kt.create,ja=Tt.create,Qr=me.create,Pa=ve.create,Na=Ze.create,La=me.createWithPreprocess,Za=Ts.create,Da=()=>In().optional(),Ua=()=>An().optional(),Ma=()=>jn().optional(),Va={string:r=>de.create({...r,coerce:!0}),number:r=>Pe.create({...r,coerce:!0}),boolean:r=>zt.create({...r,coerce:!0}),bigint:r=>Ne.create({...r,coerce:!0}),date:r=>Ye.create({...r,coerce:!0})},za=E;var ce=Object.freeze({__proto__:null,defaultErrorMap:kt,setErrorMap:zi,getErrorMap:js,makeIssue:Ps,EMPTY_PATH:Bi,addIssueToContext:g,ParseStatus:K,INVALID:E,DIRTY:dt,OK:X,isAborted:hr,isDirty:fr,isValid:Mt,isAsync:Vt,get util(){return L},get objectUtil(){return dr},ZodParsedType:v,getParsedType:$e,ZodType:I,datetimeRegex:Cn,ZodString:de,ZodNumber:Pe,ZodBigInt:Ne,ZodBoolean:zt,ZodDate:Ye,ZodSymbol:Ls,ZodUndefined:Bt,ZodNull:qt,ZodAny:xt,ZodUnknown:Ke,ZodNever:Ee,ZodVoid:Zs,ZodArray:fe,ZodObject:F,ZodUnion:Ft,ZodDiscriminatedUnion:Hs,ZodIntersection:Jt,ZodTuple:we,ZodRecord:Wt,ZodMap:Ds,ZodSet:Xe,ZodFunction:pt,ZodLazy:Ht,ZodLiteral:Gt,ZodEnum:Le,ZodNativeEnum:Kt,ZodPromise:Tt,ZodEffects:me,ZodTransformer:me,ZodOptional:ve,ZodNullable:Ze,ZodDefault:Qt,ZodCatch:Yt,ZodNaN:Us,BRAND:ia,ZodBranded:jr,ZodPipeline:Ts,ZodReadonly:Xt,custom:$n,Schema:I,ZodSchema:I,late:aa,get ZodFirstPartyTypeKind(){return x},coerce:Va,any:pa,array:va,bigint:la,boolean:jn,date:ua,discriminatedUnion:ka,effect:Qr,enum:Ia,function:Ca,instanceof:oa,intersection:xa,lazy:Ra,literal:$a,map:Ea,nan:ca,nativeEnum:Aa,never:ga,null:fa,nullable:Na,number:An,object:ya,oboolean:Ma,onumber:Ua,optional:Pa,ostring:Da,pipeline:Za,preprocess:La,promise:ja,record:Sa,set:Oa,strictObject:ba,string:In,symbol:da,transformer:Qr,tuple:Ta,undefined:ha,union:wa,unknown:ma,void:_a,NEVER:za,ZodIssueCode:p,quotelessJson:Vi,ZodError:ne});const Ba=ce.object({SUPABASE_URL:ce.string(),SUPABASE_ANON_KEY:ce.string(),SUPABASE_SERVICE_KEY:ce.string(),CONTACT_MAIL:ce.string().optional(),GITHUB_PROFIL:ce.string().optional(),LINKDIN_PROFIL:ce.string().optional(),FACEBOOK_PROFIL:ce.string().optional(),TWITTER_PROFIL:ce.string().optional(),DISCORD_SERVER:ce.string().optional(),INSTAGRAM_PROFIL:ce.string().optional()}),qa={SUPABASE_URL:"https://rlzmqxxglbxirtpctpsi.supabase.co",SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJsem1xeHhnbGJ4aXJ0cGN0cHNpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTQ4MzU4ODIsImV4cCI6MjAzMDQxMTg4Mn0.g9-nr3IaThl3ItGSDRXNTfx-GSioZ1DsdNKQ_4pXBBU",SUPABASE_SERVICE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJsem1xeHhnbGJ4aXJ0cGN0cHNpIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTcxNDgzNTg4MiwiZXhwIjoyMDMwNDExODgyfQ.61R9sAEWCYopDfHWk8E9sr_k3VNcde35jY630oib93I",CONTACT_MAIL:"guilhem.heinrich@id2l.fr",GITHUB_PROFIL:"https://github.com/ID2L",LINKDIN_PROFIL:"https://www.linkedin.com/in/guilhem-heinrich-182375126/",FACEBOOK_PROFIL:"https://www.facebook.com/guilhem.z.heinrich/",TWITTER_PROFIL:{}.TWITTER_PROFIL,INSTAGRAM_PROFIL:{}.INSTAGRAM_PROFIL,DISCORD_SERVER:{}.DISCORD_SERVER},Fa=Ba.parse(qa);var Z;(function(r){r.assertEqual=n=>n;function e(n){}r.assertIs=e;function t(n){throw new Error}r.assertNever=t,r.arrayToEnum=n=>{const i={};for(const a of n)i[a]=a;return i},r.getValidEnumValues=n=>{const i=r.objectKeys(n).filter(o=>typeof n[n[o]]!="number"),a={};for(const o of i)a[o]=n[o];return r.objectValues(a)},r.objectValues=n=>r.objectKeys(n).map(function(i){return n[i]}),r.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{const i=[];for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&i.push(a);return i},r.find=(n,i)=>{for(const a of n)if(i(a))return a},r.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function s(n,i=" | "){return n.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}r.joinValues=s,r.jsonStringifyReplacer=(n,i)=>typeof i=="bigint"?i.toString():i})(Z||(Z={}));var mr;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(mr||(mr={}));const y=Z.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ie=r=>{switch(typeof r){case"undefined":return y.undefined;case"string":return y.string;case"number":return isNaN(r)?y.nan:y.number;case"boolean":return y.boolean;case"function":return y.function;case"bigint":return y.bigint;case"symbol":return y.symbol;case"object":return Array.isArray(r)?y.array:r===null?y.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?y.promise:typeof Map!="undefined"&&r instanceof Map?y.map:typeof Set!="undefined"&&r instanceof Set?y.set:typeof Date!="undefined"&&r instanceof Date?y.date:y.object;default:return y.unknown}},m=Z.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Ja=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:");class ie extends Error{constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(i){return i.message},s={_errors:[]},n=i=>{for(const a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(n);else if(a.code==="invalid_return_type")n(a.returnTypeError);else if(a.code==="invalid_arguments")n(a.argumentsError);else if(a.path.length===0)s._errors.push(t(a));else{let o=s,c=0;for(;c<a.path.length;){const l=a.path[c];c===a.path.length-1?(o[l]=o[l]||{_errors:[]},o[l]._errors.push(t(a))):o[l]=o[l]||{_errors:[]},o=o[l],c++}}};return n(this),s}static assert(e){if(!(e instanceof ie))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Z.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},s=[];for(const n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):s.push(e(n));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}}ie.create=r=>new ie(r);const St=(r,e)=>{let t;switch(r.code){case m.invalid_type:r.received===y.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case m.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,Z.jsonStringifyReplacer)}`;break;case m.unrecognized_keys:t=`Unrecognized key(s) in object: ${Z.joinValues(r.keys,", ")}`;break;case m.invalid_union:t="Invalid input";break;case m.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Z.joinValues(r.options)}`;break;case m.invalid_enum_value:t=`Invalid enum value. Expected ${Z.joinValues(r.options)}, received '${r.received}'`;break;case m.invalid_arguments:t="Invalid function arguments";break;case m.invalid_return_type:t="Invalid function return type";break;case m.invalid_date:t="Invalid date";break;case m.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:Z.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case m.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case m.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case m.custom:t="Invalid input";break;case m.invalid_intersection_types:t="Intersection results could not be merged";break;case m.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case m.not_finite:t="Number must be finite";break;default:t=e.defaultError,Z.assertNever(r)}return{message:t}};let Pn=St;function Wa(r){Pn=r}function Ms(){return Pn}const Vs=r=>{const{data:e,path:t,errorMaps:s,issueData:n}=r,i=[...t,...n.path||[]],a={...n,path:i};if(n.message!==void 0)return{...n,path:i,message:n.message};let o="";const c=s.filter(l=>!!l).slice().reverse();for(const l of c)o=l(a,{data:e,defaultError:o}).message;return{...n,path:i,message:o}},Ha=[];function _(r,e){const t=Ms(),s=Vs({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,t,t===St?void 0:St].filter(n=>!!n)});r.common.issues.push(s)}class Q{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const s=[];for(const n of t){if(n.status==="aborted")return O;n.status==="dirty"&&e.dirty(),s.push(n.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){const s=[];for(const n of t){const i=await n.key,a=await n.value;s.push({key:i,value:a})}return Q.mergeObjectSync(e,s)}static mergeObjectSync(e,t){const s={};for(const n of t){const{key:i,value:a}=n;if(i.status==="aborted"||a.status==="aborted")return O;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof a.value!="undefined"||n.alwaysSet)&&(s[i.value]=a.value)}return{status:e.value,value:s}}}const O=Object.freeze({status:"aborted"}),ht=r=>({status:"dirty",value:r}),ee=r=>({status:"valid",value:r}),gr=r=>r.status==="aborted",_r=r=>r.status==="dirty",es=r=>r.status==="valid",ts=r=>typeof Promise!="undefined"&&r instanceof Promise;function zs(r,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(r):s?s.value:e.get(r)}function Nn(r,e,t,s,n){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?n.call(r,t):n?n.value=t:e.set(r,t),t}var k;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(k||(k={}));var Pt,Nt;class ke{constructor(e,t,s,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=s,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Yr=(r,e)=>{if(es(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new ie(r.common.issues);return this._error=t,this._error}}};function $(r){if(!r)return{};const{errorMap:e,invalid_type_error:t,required_error:s,description:n}=r;if(e&&(t||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(a,o)=>{var c,l;const{message:u}=r;return a.code==="invalid_enum_value"?{message:u!=null?u:o.defaultError}:typeof o.data=="undefined"?{message:(c=u!=null?u:s)!==null&&c!==void 0?c:o.defaultError}:a.code!=="invalid_type"?{message:o.defaultError}:{message:(l=u!=null?u:t)!==null&&l!==void 0?l:o.defaultError}},description:n}}class A{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Ie(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Ie(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Q,ctx:{common:e.parent.common,data:e.data,parsedType:Ie(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(ts(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const s=this.safeParse(e,t);if(s.success)return s.data;throw s.error}safeParse(e,t){var s;const n={common:{issues:[],async:(s=t==null?void 0:t.async)!==null&&s!==void 0?s:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ie(e)},i=this._parseSync({data:e,path:n.path,parent:n});return Yr(n,i)}async parseAsync(e,t){const s=await this.safeParseAsync(e,t);if(s.success)return s.data;throw s.error}async safeParseAsync(e,t){const s={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ie(e)},n=this._parse({data:e,path:s.path,parent:s}),i=await(ts(n)?n:Promise.resolve(n));return Yr(s,i)}refine(e,t){const s=n=>typeof t=="string"||typeof t=="undefined"?{message:t}:typeof t=="function"?t(n):t;return this._refinement((n,i)=>{const a=e(n),o=()=>i.addIssue({code:m.custom,...s(n)});return typeof Promise!="undefined"&&a instanceof Promise?a.then(c=>c?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,t){return this._refinement((s,n)=>e(s)?!0:(n.addIssue(typeof t=="function"?t(s,n):t),!1))}_refinement(e){return new ge({schema:this,typeName:T.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ye.create(this,this._def)}nullable(){return Ve.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return pe.create(this,this._def)}promise(){return Ot.create(this,this._def)}or(e){return is.create([this,e],this._def)}and(e){return as.create(this,e,this._def)}transform(e){return new ge({...$(this._def),schema:this,typeName:T.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new ds({...$(this._def),innerType:this,defaultValue:t,typeName:T.ZodDefault})}brand(){return new Pr({typeName:T.ZodBranded,type:this,...$(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new hs({...$(this._def),innerType:this,catchValue:t,typeName:T.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Ss.create(this,e)}readonly(){return fs.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Ga=/^c[^\s-]{8,}$/i,Ka=/^[0-9a-z]+$/,Qa=/^[0-9A-HJKMNP-TV-Z]{26}$/,Ya=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Xa=/^[a-z0-9_-]{21}$/i,eo=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,to=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,so="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let rr;const ro=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,no=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,io=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Ln="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ao=new RegExp(`^${Ln}$`);function Zn(r){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return r.precision?e=`${e}\\.\\d{${r.precision}}`:r.precision==null&&(e=`${e}(\\.\\d+)?`),e}function oo(r){return new RegExp(`^${Zn(r)}$`)}function Dn(r){let e=`${Ln}T${Zn(r)}`;const t=[];return t.push(r.local?"Z?":"Z"),r.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function co(r,e){return!!((e==="v4"||!e)&&ro.test(r)||(e==="v6"||!e)&&no.test(r))}class he extends A{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==y.string){const i=this._getOrReturnCtx(e);return _(i,{code:m.invalid_type,expected:y.string,received:i.parsedType}),O}const s=new Q;let n;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(n=this._getOrReturnCtx(e,n),_(n,{code:m.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="max")e.data.length>i.value&&(n=this._getOrReturnCtx(e,n),_(n,{code:m.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="length"){const a=e.data.length>i.value,o=e.data.length<i.value;(a||o)&&(n=this._getOrReturnCtx(e,n),a?_(n,{code:m.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&_(n,{code:m.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),s.dirty())}else if(i.kind==="email")to.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"email",code:m.invalid_string,message:i.message}),s.dirty());else if(i.kind==="emoji")rr||(rr=new RegExp(so,"u")),rr.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"emoji",code:m.invalid_string,message:i.message}),s.dirty());else if(i.kind==="uuid")Ya.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"uuid",code:m.invalid_string,message:i.message}),s.dirty());else if(i.kind==="nanoid")Xa.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"nanoid",code:m.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid")Ga.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"cuid",code:m.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid2")Ka.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"cuid2",code:m.invalid_string,message:i.message}),s.dirty());else if(i.kind==="ulid")Qa.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"ulid",code:m.invalid_string,message:i.message}),s.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),_(n,{validation:"url",code:m.invalid_string,message:i.message}),s.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"regex",code:m.invalid_string,message:i.message}),s.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(e,n),_(n,{code:m.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),s.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(n=this._getOrReturnCtx(e,n),_(n,{code:m.invalid_string,validation:{startsWith:i.value},message:i.message}),s.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(n=this._getOrReturnCtx(e,n),_(n,{code:m.invalid_string,validation:{endsWith:i.value},message:i.message}),s.dirty()):i.kind==="datetime"?Dn(i).test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{code:m.invalid_string,validation:"datetime",message:i.message}),s.dirty()):i.kind==="date"?ao.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{code:m.invalid_string,validation:"date",message:i.message}),s.dirty()):i.kind==="time"?oo(i).test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{code:m.invalid_string,validation:"time",message:i.message}),s.dirty()):i.kind==="duration"?eo.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"duration",code:m.invalid_string,message:i.message}),s.dirty()):i.kind==="ip"?co(e.data,i.version)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"ip",code:m.invalid_string,message:i.message}),s.dirty()):i.kind==="base64"?io.test(e.data)||(n=this._getOrReturnCtx(e,n),_(n,{validation:"base64",code:m.invalid_string,message:i.message}),s.dirty()):Z.assertNever(i);return{status:s.value,value:e.data}}_regex(e,t,s){return this.refinement(n=>e.test(n),{validation:t,code:m.invalid_string,...k.errToObj(s)})}_addCheck(e){return new he({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...k.errToObj(e)})}url(e){return this._addCheck({kind:"url",...k.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...k.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...k.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...k.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...k.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...k.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...k.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...k.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...k.errToObj(e)})}datetime(e){var t,s;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(s=e==null?void 0:e.local)!==null&&s!==void 0?s:!1,...k.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision,...k.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...k.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...k.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...k.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...k.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...k.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...k.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...k.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...k.errToObj(t)})}nonempty(e){return this.min(1,k.errToObj(e))}trim(){return new he({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new he({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new he({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}he.create=r=>{var e;return new he({checks:[],typeName:T.ZodString,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...$(r)})};function lo(r,e){const t=(r.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,n=t>s?t:s,i=parseInt(r.toFixed(n).replace(".","")),a=parseInt(e.toFixed(n).replace(".",""));return i%a/Math.pow(10,n)}class De extends A{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==y.number){const i=this._getOrReturnCtx(e);return _(i,{code:m.invalid_type,expected:y.number,received:i.parsedType}),O}let s;const n=new Q;for(const i of this._def.checks)i.kind==="int"?Z.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),_(s,{code:m.invalid_type,expected:"integer",received:"float",message:i.message}),n.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(s=this._getOrReturnCtx(e,s),_(s,{code:m.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(s=this._getOrReturnCtx(e,s),_(s,{code:m.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="multipleOf"?lo(e.data,i.value)!==0&&(s=this._getOrReturnCtx(e,s),_(s,{code:m.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),_(s,{code:m.not_finite,message:i.message}),n.dirty()):Z.assertNever(i);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,k.toString(t))}gt(e,t){return this.setLimit("min",e,!1,k.toString(t))}lte(e,t){return this.setLimit("max",e,!0,k.toString(t))}lt(e,t){return this.setLimit("max",e,!1,k.toString(t))}setLimit(e,t,s,n){return new De({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:k.toString(n)}]})}_addCheck(e){return new De({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:k.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:k.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:k.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:k.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:k.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:k.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:k.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:k.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:k.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Z.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(t===null||s.value>t)&&(t=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}}De.create=r=>new De({checks:[],typeName:T.ZodNumber,coerce:(r==null?void 0:r.coerce)||!1,...$(r)});class Ue extends A{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==y.bigint){const i=this._getOrReturnCtx(e);return _(i,{code:m.invalid_type,expected:y.bigint,received:i.parsedType}),O}let s;const n=new Q;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(s=this._getOrReturnCtx(e,s),_(s,{code:m.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(s=this._getOrReturnCtx(e,s),_(s,{code:m.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),_(s,{code:m.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):Z.assertNever(i);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,k.toString(t))}gt(e,t){return this.setLimit("min",e,!1,k.toString(t))}lte(e,t){return this.setLimit("max",e,!0,k.toString(t))}lt(e,t){return this.setLimit("max",e,!1,k.toString(t))}setLimit(e,t,s,n){return new Ue({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:k.toString(n)}]})}_addCheck(e){return new Ue({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:k.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:k.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:k.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:k.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:k.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Ue.create=r=>{var e;return new Ue({checks:[],typeName:T.ZodBigInt,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...$(r)})};class ss extends A{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==y.boolean){const s=this._getOrReturnCtx(e);return _(s,{code:m.invalid_type,expected:y.boolean,received:s.parsedType}),O}return ee(e.data)}}ss.create=r=>new ss({typeName:T.ZodBoolean,coerce:(r==null?void 0:r.coerce)||!1,...$(r)});class et extends A{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==y.date){const i=this._getOrReturnCtx(e);return _(i,{code:m.invalid_type,expected:y.date,received:i.parsedType}),O}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return _(i,{code:m.invalid_date}),O}const s=new Q;let n;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(n=this._getOrReturnCtx(e,n),_(n,{code:m.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),s.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(n=this._getOrReturnCtx(e,n),_(n,{code:m.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),s.dirty()):Z.assertNever(i);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new et({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:k.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:k.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}et.create=r=>new et({checks:[],coerce:(r==null?void 0:r.coerce)||!1,typeName:T.ZodDate,...$(r)});class Bs extends A{_parse(e){if(this._getType(e)!==y.symbol){const s=this._getOrReturnCtx(e);return _(s,{code:m.invalid_type,expected:y.symbol,received:s.parsedType}),O}return ee(e.data)}}Bs.create=r=>new Bs({typeName:T.ZodSymbol,...$(r)});class rs extends A{_parse(e){if(this._getType(e)!==y.undefined){const s=this._getOrReturnCtx(e);return _(s,{code:m.invalid_type,expected:y.undefined,received:s.parsedType}),O}return ee(e.data)}}rs.create=r=>new rs({typeName:T.ZodUndefined,...$(r)});class ns extends A{_parse(e){if(this._getType(e)!==y.null){const s=this._getOrReturnCtx(e);return _(s,{code:m.invalid_type,expected:y.null,received:s.parsedType}),O}return ee(e.data)}}ns.create=r=>new ns({typeName:T.ZodNull,...$(r)});class Et extends A{constructor(){super(...arguments),this._any=!0}_parse(e){return ee(e.data)}}Et.create=r=>new Et({typeName:T.ZodAny,...$(r)});class Qe extends A{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ee(e.data)}}Qe.create=r=>new Qe({typeName:T.ZodUnknown,...$(r)});class Oe extends A{_parse(e){const t=this._getOrReturnCtx(e);return _(t,{code:m.invalid_type,expected:y.never,received:t.parsedType}),O}}Oe.create=r=>new Oe({typeName:T.ZodNever,...$(r)});class qs extends A{_parse(e){if(this._getType(e)!==y.undefined){const s=this._getOrReturnCtx(e);return _(s,{code:m.invalid_type,expected:y.void,received:s.parsedType}),O}return ee(e.data)}}qs.create=r=>new qs({typeName:T.ZodVoid,...$(r)});class pe extends A{_parse(e){const{ctx:t,status:s}=this._processInputParams(e),n=this._def;if(t.parsedType!==y.array)return _(t,{code:m.invalid_type,expected:y.array,received:t.parsedType}),O;if(n.exactLength!==null){const a=t.data.length>n.exactLength.value,o=t.data.length<n.exactLength.value;(a||o)&&(_(t,{code:a?m.too_big:m.too_small,minimum:o?n.exactLength.value:void 0,maximum:a?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),s.dirty())}if(n.minLength!==null&&t.data.length<n.minLength.value&&(_(t,{code:m.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),s.dirty()),n.maxLength!==null&&t.data.length>n.maxLength.value&&(_(t,{code:m.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((a,o)=>n.type._parseAsync(new ke(t,a,t.path,o)))).then(a=>Q.mergeArray(s,a));const i=[...t.data].map((a,o)=>n.type._parseSync(new ke(t,a,t.path,o)));return Q.mergeArray(s,i)}get element(){return this._def.type}min(e,t){return new pe({...this._def,minLength:{value:e,message:k.toString(t)}})}max(e,t){return new pe({...this._def,maxLength:{value:e,message:k.toString(t)}})}length(e,t){return new pe({...this._def,exactLength:{value:e,message:k.toString(t)}})}nonempty(e){return this.min(1,e)}}pe.create=(r,e)=>new pe({type:r,minLength:null,maxLength:null,exactLength:null,typeName:T.ZodArray,...$(e)});function lt(r){if(r instanceof J){const e={};for(const t in r.shape){const s=r.shape[t];e[t]=ye.create(lt(s))}return new J({...r._def,shape:()=>e})}else return r instanceof pe?new pe({...r._def,type:lt(r.element)}):r instanceof ye?ye.create(lt(r.unwrap())):r instanceof Ve?Ve.create(lt(r.unwrap())):r instanceof xe?xe.create(r.items.map(e=>lt(e))):r}class J extends A{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=Z.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==y.object){const l=this._getOrReturnCtx(e);return _(l,{code:m.invalid_type,expected:y.object,received:l.parsedType}),O}const{status:s,ctx:n}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof Oe&&this._def.unknownKeys==="strip"))for(const l in n.data)a.includes(l)||o.push(l);const c=[];for(const l of a){const u=i[l],d=n.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new ke(n,d,n.path,l)),alwaysSet:l in n.data})}if(this._def.catchall instanceof Oe){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of o)c.push({key:{status:"valid",value:u},value:{status:"valid",value:n.data[u]}});else if(l==="strict")o.length>0&&(_(n,{code:m.unrecognized_keys,keys:o}),s.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of o){const d=n.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new ke(n,d,n.path,u)),alwaysSet:u in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key,f=await u.value;l.push({key:d,value:f,alwaysSet:u.alwaysSet})}return l}).then(l=>Q.mergeObjectSync(s,l)):Q.mergeObjectSync(s,c)}get shape(){return this._def.shape()}strict(e){return k.errToObj,new J({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,s)=>{var n,i,a,o;const c=(a=(i=(n=this._def).errorMap)===null||i===void 0?void 0:i.call(n,t,s).message)!==null&&a!==void 0?a:s.defaultError;return t.code==="unrecognized_keys"?{message:(o=k.errToObj(e).message)!==null&&o!==void 0?o:c}:{message:c}}}:{}})}strip(){return new J({...this._def,unknownKeys:"strip"})}passthrough(){return new J({...this._def,unknownKeys:"passthrough"})}extend(e){return new J({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new J({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:T.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new J({...this._def,catchall:e})}pick(e){const t={};return Z.objectKeys(e).forEach(s=>{e[s]&&this.shape[s]&&(t[s]=this.shape[s])}),new J({...this._def,shape:()=>t})}omit(e){const t={};return Z.objectKeys(this.shape).forEach(s=>{e[s]||(t[s]=this.shape[s])}),new J({...this._def,shape:()=>t})}deepPartial(){return lt(this)}partial(e){const t={};return Z.objectKeys(this.shape).forEach(s=>{const n=this.shape[s];e&&!e[s]?t[s]=n:t[s]=n.optional()}),new J({...this._def,shape:()=>t})}required(e){const t={};return Z.objectKeys(this.shape).forEach(s=>{if(e&&!e[s])t[s]=this.shape[s];else{let i=this.shape[s];for(;i instanceof ye;)i=i._def.innerType;t[s]=i}}),new J({...this._def,shape:()=>t})}keyof(){return Un(Z.objectKeys(this.shape))}}J.create=(r,e)=>new J({shape:()=>r,unknownKeys:"strip",catchall:Oe.create(),typeName:T.ZodObject,...$(e)});J.strictCreate=(r,e)=>new J({shape:()=>r,unknownKeys:"strict",catchall:Oe.create(),typeName:T.ZodObject,...$(e)});J.lazycreate=(r,e)=>new J({shape:r,unknownKeys:"strip",catchall:Oe.create(),typeName:T.ZodObject,...$(e)});class is extends A{_parse(e){const{ctx:t}=this._processInputParams(e),s=this._def.options;function n(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;const a=i.map(o=>new ie(o.ctx.common.issues));return _(t,{code:m.invalid_union,unionErrors:a}),O}if(t.common.async)return Promise.all(s.map(async i=>{const a={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:a}),ctx:a}})).then(n);{let i;const a=[];for(const c of s){const l={...t,common:{...t.common,issues:[]},parent:null},u=c._parseSync({data:t.data,path:t.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&a.push(l.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const o=a.map(c=>new ie(c));return _(t,{code:m.invalid_union,unionErrors:o}),O}}get options(){return this._def.options}}is.create=(r,e)=>new is({options:r,typeName:T.ZodUnion,...$(e)});const Se=r=>r instanceof cs?Se(r.schema):r instanceof ge?Se(r.innerType()):r instanceof ls?[r.value]:r instanceof Me?r.options:r instanceof us?Z.objectValues(r.enum):r instanceof ds?Se(r._def.innerType):r instanceof rs?[void 0]:r instanceof ns?[null]:r instanceof ye?[void 0,...Se(r.unwrap())]:r instanceof Ve?[null,...Se(r.unwrap())]:r instanceof Pr||r instanceof fs?Se(r.unwrap()):r instanceof hs?Se(r._def.innerType):[];class Gs extends A{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==y.object)return _(t,{code:m.invalid_type,expected:y.object,received:t.parsedType}),O;const s=this.discriminator,n=t.data[s],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(_(t,{code:m.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),O)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,s){const n=new Map;for(const i of t){const a=Se(i.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of a){if(n.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);n.set(o,i)}}return new Gs({typeName:T.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...$(s)})}}function vr(r,e){const t=Ie(r),s=Ie(e);if(r===e)return{valid:!0,data:r};if(t===y.object&&s===y.object){const n=Z.objectKeys(e),i=Z.objectKeys(r).filter(o=>n.indexOf(o)!==-1),a={...r,...e};for(const o of i){const c=vr(r[o],e[o]);if(!c.valid)return{valid:!1};a[o]=c.data}return{valid:!0,data:a}}else if(t===y.array&&s===y.array){if(r.length!==e.length)return{valid:!1};const n=[];for(let i=0;i<r.length;i++){const a=r[i],o=e[i],c=vr(a,o);if(!c.valid)return{valid:!1};n.push(c.data)}return{valid:!0,data:n}}else return t===y.date&&s===y.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}class as extends A{_parse(e){const{status:t,ctx:s}=this._processInputParams(e),n=(i,a)=>{if(gr(i)||gr(a))return O;const o=vr(i.value,a.value);return o.valid?((_r(i)||_r(a))&&t.dirty(),{status:t.value,value:o.data}):(_(s,{code:m.invalid_intersection_types}),O)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([i,a])=>n(i,a)):n(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}as.create=(r,e,t)=>new as({left:r,right:e,typeName:T.ZodIntersection,...$(t)});class xe extends A{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==y.array)return _(s,{code:m.invalid_type,expected:y.array,received:s.parsedType}),O;if(s.data.length<this._def.items.length)return _(s,{code:m.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),O;!this._def.rest&&s.data.length>this._def.items.length&&(_(s,{code:m.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...s.data].map((a,o)=>{const c=this._def.items[o]||this._def.rest;return c?c._parse(new ke(s,a,s.path,o)):null}).filter(a=>!!a);return s.common.async?Promise.all(i).then(a=>Q.mergeArray(t,a)):Q.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new xe({...this._def,rest:e})}}xe.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new xe({items:r,typeName:T.ZodTuple,rest:null,...$(e)})};class os extends A{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==y.object)return _(s,{code:m.invalid_type,expected:y.object,received:s.parsedType}),O;const n=[],i=this._def.keyType,a=this._def.valueType;for(const o in s.data)n.push({key:i._parse(new ke(s,o,s.path,o)),value:a._parse(new ke(s,s.data[o],s.path,o)),alwaysSet:o in s.data});return s.common.async?Q.mergeObjectAsync(t,n):Q.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,s){return t instanceof A?new os({keyType:e,valueType:t,typeName:T.ZodRecord,...$(s)}):new os({keyType:he.create(),valueType:e,typeName:T.ZodRecord,...$(t)})}}class Fs extends A{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==y.map)return _(s,{code:m.invalid_type,expected:y.map,received:s.parsedType}),O;const n=this._def.keyType,i=this._def.valueType,a=[...s.data.entries()].map(([o,c],l)=>({key:n._parse(new ke(s,o,s.path,[l,"key"])),value:i._parse(new ke(s,c,s.path,[l,"value"]))}));if(s.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of a){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return O;(l.status==="dirty"||u.status==="dirty")&&t.dirty(),o.set(l.value,u.value)}return{status:t.value,value:o}})}else{const o=new Map;for(const c of a){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return O;(l.status==="dirty"||u.status==="dirty")&&t.dirty(),o.set(l.value,u.value)}return{status:t.value,value:o}}}}Fs.create=(r,e,t)=>new Fs({valueType:e,keyType:r,typeName:T.ZodMap,...$(t)});class tt extends A{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==y.set)return _(s,{code:m.invalid_type,expected:y.set,received:s.parsedType}),O;const n=this._def;n.minSize!==null&&s.data.size<n.minSize.value&&(_(s,{code:m.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),n.maxSize!==null&&s.data.size>n.maxSize.value&&(_(s,{code:m.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const i=this._def.valueType;function a(c){const l=new Set;for(const u of c){if(u.status==="aborted")return O;u.status==="dirty"&&t.dirty(),l.add(u.value)}return{status:t.value,value:l}}const o=[...s.data.values()].map((c,l)=>i._parse(new ke(s,c,s.path,l)));return s.common.async?Promise.all(o).then(c=>a(c)):a(o)}min(e,t){return new tt({...this._def,minSize:{value:e,message:k.toString(t)}})}max(e,t){return new tt({...this._def,maxSize:{value:e,message:k.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}tt.create=(r,e)=>new tt({valueType:r,minSize:null,maxSize:null,typeName:T.ZodSet,...$(e)});class mt extends A{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==y.function)return _(t,{code:m.invalid_type,expected:y.function,received:t.parsedType}),O;function s(o,c){return Vs({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Ms(),St].filter(l=>!!l),issueData:{code:m.invalid_arguments,argumentsError:c}})}function n(o,c){return Vs({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Ms(),St].filter(l=>!!l),issueData:{code:m.invalid_return_type,returnTypeError:c}})}const i={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof Ot){const o=this;return ee(async function(...c){const l=new ie([]),u=await o._def.args.parseAsync(c,i).catch(h=>{throw l.addIssue(s(c,h)),l}),d=await Reflect.apply(a,this,u);return await o._def.returns._def.type.parseAsync(d,i).catch(h=>{throw l.addIssue(n(d,h)),l})})}else{const o=this;return ee(function(...c){const l=o._def.args.safeParse(c,i);if(!l.success)throw new ie([s(c,l.error)]);const u=Reflect.apply(a,this,l.data),d=o._def.returns.safeParse(u,i);if(!d.success)throw new ie([n(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new mt({...this._def,args:xe.create(e).rest(Qe.create())})}returns(e){return new mt({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,s){return new mt({args:e||xe.create([]).rest(Qe.create()),returns:t||Qe.create(),typeName:T.ZodFunction,...$(s)})}}class cs extends A{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}cs.create=(r,e)=>new cs({getter:r,typeName:T.ZodLazy,...$(e)});class ls extends A{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return _(t,{received:t.data,code:m.invalid_literal,expected:this._def.value}),O}return{status:"valid",value:e.data}}get value(){return this._def.value}}ls.create=(r,e)=>new ls({value:r,typeName:T.ZodLiteral,...$(e)});function Un(r,e){return new Me({values:r,typeName:T.ZodEnum,...$(e)})}class Me extends A{constructor(){super(...arguments),Pt.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),s=this._def.values;return _(t,{expected:Z.joinValues(s),received:t.parsedType,code:m.invalid_type}),O}if(zs(this,Pt,"f")||Nn(this,Pt,new Set(this._def.values),"f"),!zs(this,Pt,"f").has(e.data)){const t=this._getOrReturnCtx(e),s=this._def.values;return _(t,{received:t.data,code:m.invalid_enum_value,options:s}),O}return ee(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Me.create(e,{...this._def,...t})}exclude(e,t=this._def){return Me.create(this.options.filter(s=>!e.includes(s)),{...this._def,...t})}}Pt=new WeakMap;Me.create=Un;class us extends A{constructor(){super(...arguments),Nt.set(this,void 0)}_parse(e){const t=Z.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==y.string&&s.parsedType!==y.number){const n=Z.objectValues(t);return _(s,{expected:Z.joinValues(n),received:s.parsedType,code:m.invalid_type}),O}if(zs(this,Nt,"f")||Nn(this,Nt,new Set(Z.getValidEnumValues(this._def.values)),"f"),!zs(this,Nt,"f").has(e.data)){const n=Z.objectValues(t);return _(s,{received:s.data,code:m.invalid_enum_value,options:n}),O}return ee(e.data)}get enum(){return this._def.values}}Nt=new WeakMap;us.create=(r,e)=>new us({values:r,typeName:T.ZodNativeEnum,...$(e)});class Ot extends A{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==y.promise&&t.common.async===!1)return _(t,{code:m.invalid_type,expected:y.promise,received:t.parsedType}),O;const s=t.parsedType===y.promise?t.data:Promise.resolve(t.data);return ee(s.then(n=>this._def.type.parseAsync(n,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Ot.create=(r,e)=>new Ot({type:r,typeName:T.ZodPromise,...$(e)});class ge extends A{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===T.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:s}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:a=>{_(s,a),a.fatal?t.abort():t.dirty()},get path(){return s.path}};if(i.addIssue=i.addIssue.bind(i),n.type==="preprocess"){const a=n.transform(s.data,i);if(s.common.async)return Promise.resolve(a).then(async o=>{if(t.value==="aborted")return O;const c=await this._def.schema._parseAsync({data:o,path:s.path,parent:s});return c.status==="aborted"?O:c.status==="dirty"||t.value==="dirty"?ht(c.value):c});{if(t.value==="aborted")return O;const o=this._def.schema._parseSync({data:a,path:s.path,parent:s});return o.status==="aborted"?O:o.status==="dirty"||t.value==="dirty"?ht(o.value):o}}if(n.type==="refinement"){const a=o=>{const c=n.refinement(o,i);if(s.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return o.status==="aborted"?O:(o.status==="dirty"&&t.dirty(),a(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>o.status==="aborted"?O:(o.status==="dirty"&&t.dirty(),a(o.value).then(()=>({status:t.value,value:o.value}))))}if(n.type==="transform")if(s.common.async===!1){const a=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!es(a))return a;const o=n.transform(a.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(a=>es(a)?Promise.resolve(n.transform(a.value,i)).then(o=>({status:t.value,value:o})):a);Z.assertNever(n)}}ge.create=(r,e,t)=>new ge({schema:r,typeName:T.ZodEffects,effect:e,...$(t)});ge.createWithPreprocess=(r,e,t)=>new ge({schema:e,effect:{type:"preprocess",transform:r},typeName:T.ZodEffects,...$(t)});class ye extends A{_parse(e){return this._getType(e)===y.undefined?ee(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ye.create=(r,e)=>new ye({innerType:r,typeName:T.ZodOptional,...$(e)});class Ve extends A{_parse(e){return this._getType(e)===y.null?ee(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ve.create=(r,e)=>new Ve({innerType:r,typeName:T.ZodNullable,...$(e)});class ds extends A{_parse(e){const{ctx:t}=this._processInputParams(e);let s=t.data;return t.parsedType===y.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ds.create=(r,e)=>new ds({innerType:r,typeName:T.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...$(e)});class hs extends A{_parse(e){const{ctx:t}=this._processInputParams(e),s={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return ts(n)?n.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ie(s.common.issues)},input:s.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new ie(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}hs.create=(r,e)=>new hs({innerType:r,typeName:T.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...$(e)});class Js extends A{_parse(e){if(this._getType(e)!==y.nan){const s=this._getOrReturnCtx(e);return _(s,{code:m.invalid_type,expected:y.nan,received:s.parsedType}),O}return{status:"valid",value:e.data}}}Js.create=r=>new Js({typeName:T.ZodNaN,...$(r)});const uo=Symbol("zod_brand");class Pr extends A{_parse(e){const{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}}class Ss extends A{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?O:i.status==="dirty"?(t.dirty(),ht(i.value)):this._def.out._parseAsync({data:i.value,path:s.path,parent:s})})();{const n=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?O:n.status==="dirty"?(t.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:s.path,parent:s})}}static create(e,t){return new Ss({in:e,out:t,typeName:T.ZodPipeline})}}class fs extends A{_parse(e){const t=this._def.innerType._parse(e),s=n=>(es(n)&&(n.value=Object.freeze(n.value)),n);return ts(t)?t.then(n=>s(n)):s(t)}unwrap(){return this._def.innerType}}fs.create=(r,e)=>new fs({innerType:r,typeName:T.ZodReadonly,...$(e)});function Mn(r,e={},t){return r?Et.create().superRefine((s,n)=>{var i,a;if(!r(s)){const o=typeof e=="function"?e(s):typeof e=="string"?{message:e}:e,c=(a=(i=o.fatal)!==null&&i!==void 0?i:t)!==null&&a!==void 0?a:!0,l=typeof o=="string"?{message:o}:o;n.addIssue({code:"custom",...l,fatal:c})}}):Et.create()}const ho={object:J.lazycreate};var T;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(T||(T={}));const fo=(r,e={message:`Input not instance of ${r.name}`})=>Mn(t=>t instanceof r,e),Vn=he.create,zn=De.create,po=Js.create,mo=Ue.create,Bn=ss.create,go=et.create,_o=Bs.create,vo=rs.create,yo=ns.create,bo=Et.create,wo=Qe.create,ko=Oe.create,xo=qs.create,To=pe.create,So=J.create,Eo=J.strictCreate,Oo=is.create,Co=Gs.create,Ro=as.create,$o=xe.create,Io=os.create,Ao=Fs.create,jo=tt.create,Po=mt.create,No=cs.create,Lo=ls.create,Zo=Me.create,Do=us.create,Uo=Ot.create,Xr=ge.create,Mo=ye.create,Vo=Ve.create,zo=ge.createWithPreprocess,Bo=Ss.create,qo=()=>Vn().optional(),Fo=()=>zn().optional(),Jo=()=>Bn().optional(),Wo={string:r=>he.create({...r,coerce:!0}),number:r=>De.create({...r,coerce:!0}),boolean:r=>ss.create({...r,coerce:!0}),bigint:r=>Ue.create({...r,coerce:!0}),date:r=>et.create({...r,coerce:!0})},Ho=O;var en=Object.freeze({__proto__:null,defaultErrorMap:St,setErrorMap:Wa,getErrorMap:Ms,makeIssue:Vs,EMPTY_PATH:Ha,addIssueToContext:_,ParseStatus:Q,INVALID:O,DIRTY:ht,OK:ee,isAborted:gr,isDirty:_r,isValid:es,isAsync:ts,get util(){return Z},get objectUtil(){return mr},ZodParsedType:y,getParsedType:Ie,ZodType:A,datetimeRegex:Dn,ZodString:he,ZodNumber:De,ZodBigInt:Ue,ZodBoolean:ss,ZodDate:et,ZodSymbol:Bs,ZodUndefined:rs,ZodNull:ns,ZodAny:Et,ZodUnknown:Qe,ZodNever:Oe,ZodVoid:qs,ZodArray:pe,ZodObject:J,ZodUnion:is,ZodDiscriminatedUnion:Gs,ZodIntersection:as,ZodTuple:xe,ZodRecord:os,ZodMap:Fs,ZodSet:tt,ZodFunction:mt,ZodLazy:cs,ZodLiteral:ls,ZodEnum:Me,ZodNativeEnum:us,ZodPromise:Ot,ZodEffects:ge,ZodTransformer:ge,ZodOptional:ye,ZodNullable:Ve,ZodDefault:ds,ZodCatch:hs,ZodNaN:Js,BRAND:uo,ZodBranded:Pr,ZodPipeline:Ss,ZodReadonly:fs,custom:Mn,Schema:A,ZodSchema:A,late:ho,get ZodFirstPartyTypeKind(){return T},coerce:Wo,any:bo,array:To,bigint:mo,boolean:Bn,date:go,discriminatedUnion:Co,effect:Xr,enum:Zo,function:Po,instanceof:fo,intersection:Ro,lazy:No,literal:Lo,map:Ao,nan:po,nativeEnum:Do,never:ko,null:yo,nullable:Vo,number:zn,object:So,oboolean:Jo,onumber:Fo,optional:Mo,ostring:qo,pipeline:Bo,preprocess:zo,promise:Uo,record:Io,set:jo,strictObject:Eo,string:Vn,symbol:_o,transformer:Xr,tuple:$o,undefined:vo,union:Oo,unknown:wo,void:xo,NEVER:Ho,ZodIssueCode:m,quotelessJson:Ja,ZodError:ie});const Go=en.object({DEV:en.boolean()}),Ko={DEV:Boolean(!1)},Qo=Go.parse(Ko),ft={...Fa,...Qo},Wl=ai("edition-store",()=>{var t,s;sessionStorage.getItem("editionStore")||sessionStorage.setItem("editionStore","true");const r=As(Boolean((s=JSON.parse((t=sessionStorage.getItem("editionStore"))!=null?t:""))!=null?s:ft.DEV));return{editable:kn({get(){return r.value},set(n){!ft.DEV||(r.value=n,sessionStorage.setItem("editionStore",JSON.stringify(n)))}})}});class Hl{constructor(e,t){er(this,"callable");er(this,"defaultCall");this.defaultCall={},t&&(this.defaultCall=t),this.callable=e}async call(e=this.defaultCall){return await this.callable(e)}}var se,M,ms,Y,Je,_t,_e,gs,vt,yt,We,He,je,bt,Ge,Lt,_s,yr,vs,br,ys,wr,bs,kr,ws,xr,ks,Tr,xs,Sr,Ws,qn,wn,Yo=(wn=class extends ji{constructor(e,t){super();B(this,Ge);B(this,_s);B(this,vs);B(this,ys);B(this,bs);B(this,ws);B(this,ks);B(this,xs);B(this,Ws);B(this,se,void 0);B(this,M,void 0);B(this,ms,void 0);B(this,Y,void 0);B(this,Je,void 0);B(this,_t,void 0);B(this,_e,void 0);B(this,gs,void 0);B(this,vt,void 0);B(this,yt,void 0);B(this,We,void 0);B(this,He,void 0);B(this,je,void 0);B(this,bt,new Set);this.options=t,q(this,se,e),q(this,_e,null),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(b(this,M).addObserver(this),tn(b(this,M),this.options)?W(this,Ge,Lt).call(this):this.updateResult(),W(this,bs,kr).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Er(b(this,M),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Er(b(this,M),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,W(this,ws,xr).call(this),W(this,ks,Tr).call(this),b(this,M).removeObserver(this)}setOptions(e,t){const s=this.options,n=b(this,M);if(this.options=b(this,se).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");W(this,xs,Sr).call(this),b(this,M).setOptions(this.options),s._defaulted&&!ur(this.options,s)&&b(this,se).getQueryCache().notify({type:"observerOptionsUpdated",query:b(this,M),observer:this});const i=this.hasListeners();i&&sn(b(this,M),n,this.options,s)&&W(this,Ge,Lt).call(this),this.updateResult(t),i&&(b(this,M)!==n||this.options.enabled!==s.enabled||Is(this.options.staleTime,b(this,M))!==Is(s.staleTime,b(this,M)))&&W(this,_s,yr).call(this);const a=W(this,vs,br).call(this);i&&(b(this,M)!==n||this.options.enabled!==s.enabled||a!==b(this,je))&&W(this,ys,wr).call(this,a)}getOptimisticResult(e){const t=b(this,se).getQueryCache().build(b(this,se),e),s=this.createResult(t,e);return ec(this,s)&&(q(this,Y,s),q(this,_t,this.options),q(this,Je,b(this,M).state)),s}getCurrentResult(){return b(this,Y)}trackResult(e,t){const s={};return Object.keys(e).forEach(n=>{Object.defineProperty(s,n,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(n),t==null||t(n),e[n])})}),s}trackProp(e){b(this,bt).add(e)}getCurrentQuery(){return b(this,M)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=b(this,se).defaultQueryOptions(e),s=b(this,se).getQueryCache().build(b(this,se),t);return s.isFetchingOptimistic=!0,s.fetch().then(()=>this.createResult(s,t))}fetch(e){var t;return W(this,Ge,Lt).call(this,{...e,cancelRefetch:(t=e.cancelRefetch)!=null?t:!0}).then(()=>(this.updateResult(),b(this,Y)))}createResult(e,t){var $t;const s=b(this,M),n=this.options,i=b(this,Y),a=b(this,Je),o=b(this,_t),l=e!==s?e.state:b(this,ms),{state:u}=e;let d={...u},f=!1,h;if(t._optimisticResults){const ae=this.hasListeners(),Xs=!ae&&tn(e,t),ri=ae&&sn(e,s,t,n);(Xs||ri)&&(d={...d,...Zi(u.data,e.options)}),t._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:S,errorUpdatedAt:P,status:C}=d;if(t.select&&d.data!==void 0)if(i&&d.data===(a==null?void 0:a.data)&&t.select===b(this,gs))h=b(this,vt);else try{q(this,gs,t.select),h=t.select(d.data),h=Wr(i==null?void 0:i.data,h,t),q(this,vt,h),q(this,_e,null)}catch(ae){q(this,_e,ae)}else h=d.data;if(t.placeholderData!==void 0&&h===void 0&&C==="pending"){let ae;if((i==null?void 0:i.isPlaceholderData)&&t.placeholderData===(o==null?void 0:o.placeholderData))ae=i.data;else if(ae=typeof t.placeholderData=="function"?t.placeholderData(($t=b(this,yt))==null?void 0:$t.state.data,b(this,yt)):t.placeholderData,t.select&&ae!==void 0)try{ae=t.select(ae),q(this,_e,null)}catch(Xs){q(this,_e,Xs)}ae!==void 0&&(C="success",h=Wr(i==null?void 0:i.data,ae,t),f=!0)}b(this,_e)&&(S=b(this,_e),h=b(this,vt),P=Date.now(),C="error");const z=d.fetchStatus==="fetching",te=C==="pending",D=C==="error",U=te&&z,H=h!==void 0;return{status:C,fetchStatus:d.fetchStatus,isPending:te,isSuccess:C==="success",isError:D,isInitialLoading:U,isLoading:U,data:h,dataUpdatedAt:d.dataUpdatedAt,error:S,errorUpdatedAt:P,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:z,isRefetching:z&&!te,isLoadingError:D&&!H,isPaused:d.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:D&&H,isStale:Nr(e,t),refetch:this.refetch}}updateResult(e){const t=b(this,Y),s=this.createResult(b(this,M),this.options);if(q(this,Je,b(this,M).state),q(this,_t,this.options),b(this,Je).data!==void 0&&q(this,yt,b(this,M)),ur(s,t))return;q(this,Y,s);const n={},i=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,o=typeof a=="function"?a():a;if(o==="all"||!o&&!b(this,bt).size)return!0;const c=new Set(o!=null?o:b(this,bt));return this.options.throwOnError&&c.add("error"),Object.keys(b(this,Y)).some(l=>{const u=l;return b(this,Y)[u]!==t[u]&&c.has(u)})};(e==null?void 0:e.listeners)!==!1&&i()&&(n.listeners=!0),W(this,Ws,qn).call(this,{...n,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&W(this,bs,kr).call(this)}},se=new WeakMap,M=new WeakMap,ms=new WeakMap,Y=new WeakMap,Je=new WeakMap,_t=new WeakMap,_e=new WeakMap,gs=new WeakMap,vt=new WeakMap,yt=new WeakMap,We=new WeakMap,He=new WeakMap,je=new WeakMap,bt=new WeakMap,Ge=new WeakSet,Lt=function(e){W(this,xs,Sr).call(this);let t=b(this,M).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(Pi)),t},_s=new WeakSet,yr=function(){W(this,ws,xr).call(this);const e=Is(this.options.staleTime,b(this,M));if(Fr||b(this,Y).isStale||!Jr(e))return;const s=Ni(b(this,Y).dataUpdatedAt,e)+1;q(this,We,setTimeout(()=>{b(this,Y).isStale||this.updateResult()},s))},vs=new WeakSet,br=function(){var e;return(e=typeof this.options.refetchInterval=="function"?this.options.refetchInterval(b(this,M)):this.options.refetchInterval)!=null?e:!1},ys=new WeakSet,wr=function(e){W(this,ks,Tr).call(this),q(this,je,e),!(Fr||this.options.enabled===!1||!Jr(b(this,je))||b(this,je)===0)&&q(this,He,setInterval(()=>{(this.options.refetchIntervalInBackground||Li.isFocused())&&W(this,Ge,Lt).call(this)},b(this,je)))},bs=new WeakSet,kr=function(){W(this,_s,yr).call(this),W(this,ys,wr).call(this,W(this,vs,br).call(this))},ws=new WeakSet,xr=function(){b(this,We)&&(clearTimeout(b(this,We)),q(this,We,void 0))},ks=new WeakSet,Tr=function(){b(this,He)&&(clearInterval(b(this,He)),q(this,He,void 0))},xs=new WeakSet,Sr=function(){const e=b(this,se).getQueryCache().build(b(this,se),this.options);if(e===b(this,M))return;const t=b(this,M);q(this,M,e),q(this,ms,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},Ws=new WeakSet,qn=function(e){Di.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(b(this,Y))}),b(this,se).getQueryCache().notify({query:b(this,M),type:"observerResultsUpdated"})})},wn);function Xo(r,e){return e.enabled!==!1&&r.state.data===void 0&&!(r.state.status==="error"&&e.retryOnMount===!1)}function tn(r,e){return Xo(r,e)||r.state.data!==void 0&&Er(r,e,e.refetchOnMount)}function Er(r,e,t){if(e.enabled!==!1){const s=typeof t=="function"?t(r):t;return s==="always"||s!==!1&&Nr(r,e)}return!1}function sn(r,e,t,s){return(r!==e||s.enabled===!1)&&(!t.suspense||r.state.status!=="error")&&Nr(r,t)}function Nr(r,e){return e.enabled!==!1&&r.isStaleByTime(Is(e.staleTime,r))}function ec(r,e){return!ur(r.getCurrentResult(),e)}function tc(r=""){if(!oi())throw new Error("vue-query hooks can only be used inside setup() function or functions that support injection context.");const e=Ui(r),t=ci(e);if(!t)throw new Error("No 'queryClient' found in Vue context, use 'VueQueryPlugin' to properly initialize the library.");return t}function sc(r,e,t){const s=t||tc(),n=kn(()=>{const f=Mi(e);typeof f.enabled=="function"&&(f.enabled=f.enabled());const h=s.defaultQueryOptions(f);return h._optimisticResults=s.isRestoring.value?"isRestoring":"optimistic",h}),i=new r(s,n.value),a=li(i.getCurrentResult());let o=()=>{};Os(s.isRestoring,f=>{f||(o(),o=i.subscribe(h=>{Hr(a,h)}))},{immediate:!0});const c=()=>{i.setOptions(n.value),Hr(a,i.getCurrentResult())};Os(n,c),ui(()=>{o()});const l=(...f)=>(c(),a.refetch(...f)),u=()=>new Promise((f,h)=>{let S=()=>{};const P=()=>{if(n.value.enabled!==!1){i.setOptions(n.value);const C=i.getOptimisticResult(n.value);C.isStale?(S(),i.fetchOptimistic(n.value).then(f,z=>{Gr(n.value.throwOnError,[z,i.getCurrentQuery()])?h(z):f(i.getCurrentResult())})):(S(),f(C))}};P(),S=Os(n,P)});Os(()=>a.error,f=>{if(a.isError&&!a.isFetching&&Gr(n.value.throwOnError,[f,i.getCurrentQuery()]))throw f});const d=di(hi(a));for(const f in a)typeof a[f]=="function"&&(d[f]=a[f]);return d.suspense=u,d.refetch=l,d}function Gl(r,e){return sc(Yo,r,e)}const rc=r=>{let e;return r?e=r:typeof fetch=="undefined"?e=(...t)=>wt(()=>Promise.resolve().then(function(){return Es}),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class Lr extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class nc extends Lr{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ic extends Lr{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ac extends Lr{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Or;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(Or||(Or={}));var oc=globalThis&&globalThis.__awaiter||function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(u){try{l(s.next(u))}catch(d){a(d)}}function c(u){try{l(s.throw(u))}catch(d){a(d)}}function l(u){u.done?i(u.value):n(u.value).then(o,c)}l((s=s.apply(r,e||[])).next())})};class cc{constructor(e,{headers:t={},customFetch:s,region:n=Or.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=rc(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return oc(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:a}=t;let o={},{region:c}=t;c||(c=this.region),c&&c!=="any"&&(o["x-region"]=c);let l;a&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob!="undefined"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",l=a):typeof a=="string"?(o["Content-Type"]="text/plain",l=a):typeof FormData!="undefined"&&a instanceof FormData?l=a:(o["Content-Type"]="application/json",l=JSON.stringify(a)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),n),body:l}).catch(S=>{throw new nc(S)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new ic(u);if(!u.ok)throw new ac(u);let f=((s=u.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),h;return f==="application/json"?h=yield u.json():f==="application/octet-stream"?h=yield u.blob():f==="text/event-stream"?h=u:f==="multipart/form-data"?h=yield u.formData():h=yield u.text(),{data:h,error:null}}catch(n){return{data:null,error:n}}})}}var lc=function(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("unable to locate global object")},Ct=lc();const uc=Ct.fetch;var Zr=Ct.fetch.bind(Ct);const Fn=Ct.Headers,dc=Ct.Request,hc=Ct.Response;var Es=Object.freeze(Object.defineProperty({__proto__:null,fetch:uc,default:Zr,Headers:Fn,Request:dc,Response:hc},Symbol.toStringTag,{value:"Module"}));class fc extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}class pc{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch=="undefined"?this.fetch=Zr:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,o,c;let l=null,u=null,d=null,f=i.status,h=i.statusText;if(i.ok){if(this.method!=="HEAD"){const z=await i.text();z===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=z:u=JSON.parse(z))}const P=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),C=(o=i.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");P&&C&&C.length>1&&(d=parseInt(C[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,f=406,h="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const P=await i.text();try{l=JSON.parse(P),Array.isArray(l)&&i.status===404&&(u=[],l=null,f=200,h="OK")}catch{i.status===404&&P===""?(f=204,h="No Content"):l={message:P}}if(l&&this.isMaybeSingle&&((c=l==null?void 0:l.details)===null||c===void 0?void 0:c.includes("0 rows"))&&(l=null,f=200,h="OK"),l&&this.shouldThrowOnError)throw new fc(l)}return{error:l,data:u,count:d,status:f,statusText:h}});return this.shouldThrowOnError||(n=n.catch(i=>{var a,o,c;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}}class mc extends pc{select(e){let t=!1;const s=(e!=null?e:"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:n,referencedTable:i=n}={}){const a=i?`${i}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const n=typeof s=="undefined"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:n=s}={}){const i=typeof n=="undefined"?"offset":`${n}.offset`,a=typeof n=="undefined"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:n=!1,wal:i=!1,format:a="text"}={}){var o;const c=[e?"analyze":null,t?"verbose":null,s?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${l}"; options=${c};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class ut extends mc{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const a=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}}class gc{constructor(e,{headers:t={},schema:s,fetch:n}){this.url=e,this.headers=t,this.schema=s,this.fetch=n}select(e,{head:t=!1,count:s}={}){const n=t?"HEAD":"GET";let i=!1;const a=(e!=null?e:"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",a),s&&(this.headers.Prefer=`count=${s}`),new ut({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),s||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const a=e.reduce((o,c)=>o.concat(Object.keys(c)),[]);if(a.length>0){const o=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",o.join(","))}}return new ut({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:n,defaultToNull:i=!0}={}){const a="POST",o=[`resolution=${s?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&o.push(this.headers.Prefer),n&&o.push(`count=${n}`),i||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const c=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(c.length>0){const l=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new ut({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new ut({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new ut({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const _c="1.15.2",vc={"X-Client-Info":`postgrest-js/${_c}`};class Dr{constructor(e,{headers:t={},schema:s,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},vc),t),this.schemaName=s,this.fetch=n}from(e){const t=new URL(`${this.url}/${e}`);return new gc(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Dr(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:n=!1,count:i}={}){let a;const o=new URL(`${this.url}/rpc/${e}`);let c;s||n?(a=s?"HEAD":"GET",Object.entries(t).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{o.searchParams.append(u,d)})):(a="POST",c=t);const l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new ut({method:a,url:o,headers:l,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}}const yc="2.9.5",bc={"X-Client-Info":`realtime-js/${yc}`},wc="1.0.0",Jn=1e4,kc=1e3;var gt;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(gt||(gt={}));var re;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(re||(re={}));var ue;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(ue||(ue={}));var Cr;(function(r){r.websocket="websocket"})(Cr||(Cr={}));var Fe;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Fe||(Fe={}));class Wn{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class xc{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const n=t.getUint8(1),i=t.getUint8(2);let a=this.HEADER_LENGTH+2;const o=s.decode(e.slice(a,a+n));a=a+n;const c=s.decode(e.slice(a,a+i));a=a+i;const l=JSON.parse(s.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:c,payload:l}}}class nr{constructor(e,t,s={},n=Jn){this.channel=e,this.event=t,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){!this.refEvent||this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var rn;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(rn||(rn={}));class Dt{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Dt.syncState(this.state,n,i,a),this.pendingDiffs.forEach(c=>{this.state=Dt.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(s.diff,{},n=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Dt.syncDiff(this.state,n,i,a),o())}),this.onJoin((n,i,a)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:a})}),this.onLeave((n,i,a)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,n){const i=this.cloneDeep(e),a=this.transformState(t),o={},c={};return this.map(i,(l,u)=>{a[l]||(c[l]=u)}),this.map(a,(l,u)=>{const d=i[l];if(d){const f=u.map(C=>C.presence_ref),h=d.map(C=>C.presence_ref),S=u.filter(C=>h.indexOf(C.presence_ref)<0),P=d.filter(C=>f.indexOf(C.presence_ref)<0);S.length>0&&(o[l]=S),P.length>0&&(c[l]=P)}else o[l]=u}),this.syncDiff(i,{joins:o,leaves:c},s,n)}static syncDiff(e,t,s,n){const{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(i,(o,c)=>{var l;const u=(l=e[o])!==null&&l!==void 0?l:[];if(e[o]=this.cloneDeep(c),u.length>0){const d=e[o].map(h=>h.presence_ref),f=u.filter(h=>d.indexOf(h.presence_ref)<0);e[o].unshift(...f)}s(o,u,c)}),this.map(a,(o,c)=>{let l=e[o];if(!l)return;const u=c.map(d=>d.presence_ref);l=l.filter(d=>u.indexOf(d.presence_ref)<0),e[o]=l,n(o,l,c),l.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const n=e[s];return"metas"in n?t[s]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[s]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var V;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(V||(V={}));const nn=(r,e,t={})=>{var s;const n=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((i,a)=>(i[a]=Tc(a,r,e,n),i),{})},Tc=(r,e,t,s)=>{const n=e.find(o=>o.name===r),i=n==null?void 0:n.type,a=t[r];return i&&!s.includes(i)?Hn(i,a):Rr(a)},Hn=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return Cc(e,t)}switch(r){case V.bool:return Sc(e);case V.float4:case V.float8:case V.int2:case V.int4:case V.int8:case V.numeric:case V.oid:return Ec(e);case V.json:case V.jsonb:return Oc(e);case V.timestamp:return Rc(e);case V.abstime:case V.date:case V.daterange:case V.int4range:case V.int8range:case V.money:case V.reltime:case V.text:case V.time:case V.timestamptz:case V.timetz:case V.tsrange:case V.tstzrange:return Rr(e);default:return Rr(e)}},Rr=r=>r,Sc=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Ec=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},Oc=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},Cc=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,s=r[t];if(r[0]==="{"&&s==="}"){let i;const a=r.slice(1,t);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>Hn(e,o))}return r},Rc=r=>typeof r=="string"?r.replace(" ","T"):r;var an;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(an||(an={}));var on;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes"})(on||(on={}));var cn;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(cn||(cn={}));class Ur{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=re.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new nr(this,ue.join,this.params,this.timeout),this.rejoinTimer=new Wn(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=re.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=re.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=re.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{!this._isJoining()||(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=re.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ue.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new Dt(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,t=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a}}=this.params;this._onError(l=>e&&e("CHANNEL_ERROR",l)),this._onClose(()=>e&&e("CLOSED"));const o={},c={broadcast:i,presence:a,postgres_changes:(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(l=>l.filter))!==null&&n!==void 0?n:[]};this.socket.accessToken&&(o.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:c},o)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:l})=>{var u;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),l===void 0){e&&e("SUBSCRIBED");return}else{const d=this.bindings.postgres_changes,f=(u=d==null?void 0:d.length)!==null&&u!==void 0?u:0,h=[];for(let S=0;S<f;S++){const P=d[S],{filter:{event:C,schema:z,table:te,filter:D}}=P,U=l&&l[S];if(U&&U.event===C&&U.schema===z&&U.table===te&&U.filter===D)h.push(Object.assign(Object.assign({},P),{id:U.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=h,e&&e("SUBSCRIBED");return}}).receive("error",l=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(l).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,o={method:"POST",headers:{apikey:(s=this.socket.apiKey)!==null&&s!==void 0?s:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,o,(n=t.timeout)!==null&&n!==void 0?n:this.timeout)).ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,c;const l=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),l.receive("ok",()=>i("ok")),l.receive("error",()=>i("error")),l.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=re.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ue.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(s=>{const n=new nr(this,ue.leave,{},e);n.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,t,s){const n=new AbortController,i=setTimeout(()=>n.abort(),s),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(i),a}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new nr(this,e,t,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var n,i;const a=e.toLocaleLowerCase(),{close:o,error:c,leave:l,join:u}=ue;if(s&&[o,c,l,u].indexOf(a)>=0&&s!==this._joinRef())return;let f=this._onMessage(a,t,s);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(h=>{var S,P,C;return((S=h.filter)===null||S===void 0?void 0:S.event)==="*"||((C=(P=h.filter)===null||P===void 0?void 0:P.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===a}).map(h=>h.callback(f,s)):(i=this.bindings[a])===null||i===void 0||i.filter(h=>{var S,P,C,z,te,D;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in h){const U=h.id,H=(S=h.filter)===null||S===void 0?void 0:S.event;return U&&((P=t.ids)===null||P===void 0?void 0:P.includes(U))&&(H==="*"||(H==null?void 0:H.toLocaleLowerCase())===((C=t.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const U=(te=(z=h==null?void 0:h.filter)===null||z===void 0?void 0:z.event)===null||te===void 0?void 0:te.toLocaleLowerCase();return U==="*"||U===((D=t==null?void 0:t.event)===null||D===void 0?void 0:D.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===a}).map(h=>{if(typeof f=="object"&&"ids"in f){const S=f.data,{schema:P,table:C,commit_timestamp:z,type:te,errors:D}=S;f=Object.assign(Object.assign({},{schema:P,table:C,commit_timestamp:z,eventType:te,new:{},old:{},errors:D}),this._getPayloadRecords(S))}h.callback(f,s)})}_isClosed(){return this.state===re.closed}_isJoined(){return this.state===re.joined}_isJoining(){return this.state===re.joining}_isLeaving(){return this.state===re.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const n=e.toLocaleLowerCase(),i={type:n,filter:t,callback:s};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&Ur.isEqual(n.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ue.close,{},e)}_onError(e){this._on(ue.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=re.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=nn(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=nn(e.columns,e.old_record)),t}}const $c=()=>{},Ic=typeof WebSocket!="undefined";class Ac{constructor(e,t){var s;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=bc,this.params={},this.timeout=Jn,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=$c,this.conn=null,this.sendBuffer=[],this.serializer=new xc,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=i=>{let a;return i?a=i:typeof fetch=="undefined"?a=(...o)=>wt(()=>Promise.resolve().then(function(){return Es}),void 0).then(({default:c})=>c(...o)):a=fetch,(...o)=>a(...o)},this.endPoint=`${e}/${Cr.websocket}`,t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const n=(s=t==null?void 0:t.params)===null||s===void 0?void 0:s.apikey;n&&(this.accessToken=n,this.apiKey=n),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,a)=>a(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Wn(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(Ic){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new jc(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),wt(()=>import("./browser.b1e1f028.js").then(function(e){return e.b}),[]).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t!=null?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case gt.connecting:return Fe.Connecting;case gt.open:return Fe.Open;case gt.closing:return Fe.Closing;default:return Fe.Closed}}isConnected(){return this.connectionState()===Fe.Open}channel(e,t={config:{}}){const s=new Ur(`realtime:${e}`,t,this);return this.channels.push(s),s}push(e){const{topic:t,event:s,payload:n,ref:i}=e,a=()=>{this.encode(e,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${t} ${s} (${i})`,n),this.isConnected()?a():this.sendBuffer.push(a)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(ue.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:wc}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:n,payload:i,ref:a}=t;(a&&a===this.pendingHeartbeatRef||n===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${s} ${n} ${a&&"("+a+")"||""}`,i),this.channels.filter(o=>o._isMember(s)).forEach(o=>o._trigger(n,i,a)),this.stateChangeCallbacks.message.forEach(o=>o(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(ue.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${s}${n}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(!!this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(kc,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class jc{constructor(e,t,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=gt.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=s.close}}class Mr extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function G(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class Pc extends Mr{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ln extends Mr{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Nc=globalThis&&globalThis.__awaiter||function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(u){try{l(s.next(u))}catch(d){a(d)}}function c(u){try{l(s.throw(u))}catch(d){a(d)}}function l(u){u.done?i(u.value):n(u.value).then(o,c)}l((s=s.apply(r,e||[])).next())})};const Gn=r=>{let e;return r?e=r:typeof fetch=="undefined"?e=(...t)=>wt(()=>Promise.resolve().then(function(){return Es}),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Lc=()=>Nc(void 0,void 0,void 0,function*(){return typeof Response=="undefined"?(yield wt(()=>Promise.resolve().then(function(){return Es}),void 0)).Response:Response});var Rt=globalThis&&globalThis.__awaiter||function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(u){try{l(s.next(u))}catch(d){a(d)}}function c(u){try{l(s.throw(u))}catch(d){a(d)}}function l(u){u.done?i(u.value):n(u.value).then(o,c)}l((s=s.apply(r,e||[])).next())})};const ir=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Zc=(r,e)=>Rt(void 0,void 0,void 0,function*(){const t=yield Lc();r instanceof t?r.json().then(s=>{e(new Pc(ir(s),r.status||500))}).catch(s=>{e(new ln(ir(s),s))}):e(new ln(ir(r),r))}),Dc=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),t))};function Ks(r,e,t,s,n,i){return Rt(this,void 0,void 0,function*(){return new Promise((a,o)=>{r(t,Dc(e,s,n,i)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>Zc(c,o))})})}function $r(r,e,t,s){return Rt(this,void 0,void 0,function*(){return Ks(r,"GET",e,t,s)})}function Re(r,e,t,s,n){return Rt(this,void 0,void 0,function*(){return Ks(r,"POST",e,s,n,t)})}function Uc(r,e,t,s,n){return Rt(this,void 0,void 0,function*(){return Ks(r,"PUT",e,s,n,t)})}function Kn(r,e,t,s,n){return Rt(this,void 0,void 0,function*(){return Ks(r,"DELETE",e,s,n,t)})}var oe=globalThis&&globalThis.__awaiter||function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(u){try{l(s.next(u))}catch(d){a(d)}}function c(u){try{l(s.throw(u))}catch(d){a(d)}}function l(u){u.done?i(u.value):n(u.value).then(o,c)}l((s=s.apply(r,e||[])).next())})};const Mc={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},un={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Vc{constructor(e,t={},s,n){this.url=e,this.headers=t,this.bucketId=s,this.fetch=Gn(n)}uploadOrUpdate(e,t,s,n){return oe(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},un),n),o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});typeof Blob!="undefined"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),i.append("",s)):typeof FormData!="undefined"&&s instanceof FormData?(i=s,i.append("cacheControl",a.cacheControl)):(i=s,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType);const c=this._removeEmptyFolders(t),l=this._getFinalPath(c),u=yield this.fetch(`${this.url}/object/${l}`,Object.assign({method:e,body:i,headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{})),d=yield u.json();return u.ok?{data:{path:c,id:d.Id,fullPath:d.Key},error:null}:{data:null,error:d}}catch(i){if(G(i))return{data:null,error:i};throw i}})}upload(e,t,s){return oe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,n){return oe(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let c;const l=Object.assign({upsert:un.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob!="undefined"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",s)):typeof FormData!="undefined"&&s instanceof FormData?(c=s,c.append("cacheControl",l.cacheControl)):(c=s,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);const d=yield this.fetch(o.toString(),{method:"PUT",body:c,headers:u}),f=yield d.json();return d.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(c){if(G(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e){return oe(this,void 0,void 0,function*(){try{let t=this._getFinalPath(e);const s=yield Re(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),n=new URL(this.url+s.url),i=n.searchParams.get("token");if(!i)throw new Mr("No token returned by API");return{data:{signedUrl:n.toString(),path:e,token:i},error:null}}catch(t){if(G(t))return{data:null,error:t};throw t}})}update(e,t,s){return oe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t){return oe(this,void 0,void 0,function*(){try{return{data:yield Re(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(s){if(G(s))return{data:null,error:s};throw s}})}copy(e,t){return oe(this,void 0,void 0,function*(){try{return{data:{path:(yield Re(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(s){if(G(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,s){return oe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield Re(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const a=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(n){if(G(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,s){return oe(this,void 0,void 0,function*(){try{const n=yield Re(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(n){if(G(n))return{data:null,error:n};throw n}})}download(e,t){return oe(this,void 0,void 0,function*(){const n=typeof(t==null?void 0:t.transform)!="undefined"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=i?`?${i}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield $r(this.fetch,`${this.url}/${n}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(G(o))return{data:null,error:o};throw o}})}getPublicUrl(e,t){const s=this._getFinalPath(e),n=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&n.push(i);const o=typeof(t==null?void 0:t.transform)!="undefined"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&n.push(c);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${s}${l}`)}}}remove(e){return oe(this,void 0,void 0,function*(){try{return{data:yield Kn(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(G(t))return{data:null,error:t};throw t}})}list(e,t,s){return oe(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Mc),t),{prefix:e||""});return{data:yield Re(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(G(n))return{data:null,error:n};throw n}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const zc="2.5.5",Bc={"X-Client-Info":`storage-js/${zc}`};var it=globalThis&&globalThis.__awaiter||function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(u){try{l(s.next(u))}catch(d){a(d)}}function c(u){try{l(s.throw(u))}catch(d){a(d)}}function l(u){u.done?i(u.value):n(u.value).then(o,c)}l((s=s.apply(r,e||[])).next())})};class qc{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},Bc),t),this.fetch=Gn(s)}listBuckets(){return it(this,void 0,void 0,function*(){try{return{data:yield $r(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(G(e))return{data:null,error:e};throw e}})}getBucket(e){return it(this,void 0,void 0,function*(){try{return{data:yield $r(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(G(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return it(this,void 0,void 0,function*(){try{return{data:yield Re(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(G(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return it(this,void 0,void 0,function*(){try{return{data:yield Uc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(G(s))return{data:null,error:s};throw s}})}emptyBucket(e){return it(this,void 0,void 0,function*(){try{return{data:yield Re(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(G(t))return{data:null,error:t};throw t}})}deleteBucket(e){return it(this,void 0,void 0,function*(){try{return{data:yield Kn(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(G(t))return{data:null,error:t};throw t}})}}class Fc extends qc{constructor(e,t={},s){super(e,t,s)}from(e){return new Vc(this.url,this.headers,e,this.fetch)}}const Jc="2.43.4";let Zt="";typeof Deno!="undefined"?Zt="deno":typeof document!="undefined"?Zt="web":typeof navigator!="undefined"&&navigator.product==="ReactNative"?Zt="react-native":Zt="node";const Wc={"X-Client-Info":`supabase-js-${Zt}/${Jc}`},Hc={headers:Wc},Gc={schema:"public"},Kc={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Qc={};var Yc=globalThis&&globalThis.__awaiter||function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(u){try{l(s.next(u))}catch(d){a(d)}}function c(u){try{l(s.throw(u))}catch(d){a(d)}}function l(u){u.done?i(u.value):n(u.value).then(o,c)}l((s=s.apply(r,e||[])).next())})};const Xc=r=>{let e;return r?e=r:typeof fetch=="undefined"?e=Zr:e=fetch,(...t)=>e(...t)},el=()=>typeof Headers=="undefined"?Fn:Headers,tl=(r,e,t)=>{const s=Xc(t),n=el();return(i,a)=>Yc(void 0,void 0,void 0,function*(){var o;const c=(o=yield e())!==null&&o!==void 0?o:r;let l=new n(a==null?void 0:a.headers);return l.has("apikey")||l.set("apikey",r),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),s(i,Object.assign(Object.assign({},a),{headers:l}))})};function sl(r){return r.replace(/\/$/,"")}function rl(r,e){const{db:t,auth:s,realtime:n,global:i}=r,{db:a,auth:o,realtime:c,global:l}=e;return{db:Object.assign(Object.assign({},a),t),auth:Object.assign(Object.assign({},o),s),realtime:Object.assign(Object.assign({},c),n),global:Object.assign(Object.assign({},l),i)}}const Qn="2.64.2",nl="http://localhost:9999",il="supabase.auth.token",al={"X-Client-Info":`gotrue-js/${Qn}`},dn=10,Ir="X-Supabase-Api-Version",Yn={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function ol(r){return Math.round(Date.now()/1e3)+r}function cl(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const le=()=>typeof document!="undefined",ze={tested:!1,writable:!1},Ut=()=>{if(!le())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ze.tested)return ze.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),ze.tested=!0,ze.writable=!0}catch{ze.tested=!0,ze.writable=!1}return ze.writable};function ar(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return t.searchParams.forEach((s,n)=>{e[n]=s}),e}const Xn=r=>{let e;return r?e=r:typeof fetch=="undefined"?e=(...t)=>wt(()=>Promise.resolve().then(function(){return Es}),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},ll=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",ei=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},Cs=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},or=async(r,e)=>{await r.removeItem(e)};function ul(r){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",s,n,i,a,o,c,l,u=0;for(r=r.replace("-","+").replace("_","/");u<r.length;)a=e.indexOf(r.charAt(u++)),o=e.indexOf(r.charAt(u++)),c=e.indexOf(r.charAt(u++)),l=e.indexOf(r.charAt(u++)),s=a<<2|o>>4,n=(o&15)<<4|c>>2,i=(c&3)<<6|l,t=t+String.fromCharCode(s),c!=64&&n!=0&&(t=t+String.fromCharCode(n)),l!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class Qs{constructor(){this.promise=new Qs.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Qs.promiseConstructor=Promise;function hn(r){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=r.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const s=t[1];return JSON.parse(ul(s))}async function dl(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function hl(r,e){return new Promise((s,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await r(i);if(!e(i,null,a)){s(a);return}}catch(a){if(!e(i,a)){n(a);return}}})()})}function fl(r){return("0"+r.toString(16)).substr(-2)}function pl(){const e=new Uint32Array(56);if(typeof crypto=="undefined"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let n="";for(let i=0;i<56;i++)n+=t.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,fl).join("")}async function ml(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(s);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}function gl(r){return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function _l(r){if(!(typeof crypto!="undefined"&&typeof crypto.subtle!="undefined"&&typeof TextEncoder!="undefined"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await ml(r);return gl(t)}async function at(r,e,t=!1){const s=pl();let n=s;t&&(n+="/PASSWORD_RECOVERY"),await ei(r,`${e}-code-verifier`,n);const i=await _l(s);return[i,s===i?"plain":"s256"]}const vl=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function yl(r){const e=r.headers.get(Ir);if(!e||!e.match(vl))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class Vr extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function j(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class bl extends Vr{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function wl(r){return j(r)&&r.name==="AuthApiError"}class ti extends Vr{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class st extends Vr{constructor(e,t,s,n){super(e,s,n),this.name=t,this.status=s}}class Be extends st{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class cr extends st{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Rs extends st{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class $s extends st{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class fn extends st{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ar extends st{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function lr(r){return j(r)&&r.name==="AuthRetryableFetchError"}class pn extends st{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}var kl=globalThis&&globalThis.__rest||function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};const qe=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),xl=[502,503,504];async function mn(r){var e;if(!ll(r))throw new Ar(qe(r),0);if(xl.includes(r.status))throw new Ar(qe(r),r.status);let t;try{t=await r.json()}catch(i){throw new ti(qe(i),i)}let s;const n=yl(r);if(n&&n.getTime()>=Yn["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new pn(qe(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[])}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new pn(qe(t),r.status,t.weak_password.reasons);throw new bl(qe(t),r.status||500,s)}const Tl=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),t))};async function N(r,e,t,s){var n;const i=Object.assign({},s==null?void 0:s.headers);i[Ir]||(i[Ir]=Yn["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const a=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(a.redirect_to=s.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await Sl(r,e,t+o,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function Sl(r,e,t,s,n,i){const a=Tl(e,s,n,i);let o;try{o=await r(t,Object.assign({},a))}catch(c){throw console.error(c),new Ar(qe(c),0)}if(o.ok||await mn(o),s!=null&&s.noResolveJson)return o;try{return await o.json()}catch(c){await mn(c)}}function Ce(r){var e;let t=null;Rl(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=ol(r.expires_in)));const s=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:s},error:null}}function gn(r){const e=Ce(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=r.weak_password),e}function Ae(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function El(r){return{data:r,error:null}}function Ol(r){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:i}=r,a=kl(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:i},c=Object.assign({},a);return{data:{properties:o,user:c},error:null}}function Cl(r){return r}function Rl(r){return r.access_token&&r.refresh_token&&r.expires_in}var $l=globalThis&&globalThis.__rest||function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};class Il{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=Xn(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await N(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(j(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await N(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ae})}catch(s){if(j(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=$l(e,["options"]),n=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await N(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Ol,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(j(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await N(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ae})}catch(t){if(j(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,n,i,a,o,c;try{const l={nextPage:null,lastPage:0,total:0},u=await N(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Cl});if(u.error)throw u.error;const d=await u.json(),f=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,h=(c=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return h.length>0&&(h.forEach(S=>{const P=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(S.split(";")[1].split("=")[1]);l[`${C}Page`]=P}),l.total=parseInt(f)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(j(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){try{return await N(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ae})}catch(t){if(j(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await N(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Ae})}catch(s){if(j(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){try{return await N(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Ae})}catch(s){if(j(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){try{const{data:t,error:s}=await N(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:s}}catch(t){if(j(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await N(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(j(t))return{data:null,error:t};throw t}}}const Al={getItem:r=>Ut()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{!Ut()||globalThis.localStorage.setItem(r,e)},removeItem:r=>{!Ut()||globalThis.localStorage.removeItem(r)}};function _n(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function jl(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self!="undefined"&&(self.globalThis=self)}}const ot={debug:!!(globalThis&&Ut()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class si extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Pl extends si{}async function Nl(r,e,t){ot.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),ot.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){ot.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,n.name);try{return await t()}finally{ot.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,n.name)}}else{if(e===0)throw ot.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new Pl(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(ot.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}})}jl();const Ll={url:nl,storageKey:il,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:al,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},It=30*1e3,vn=3;async function yn(r,e,t){return await t()}class ps{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ps.nextInstanceID,ps.nextInstanceID+=1,this.instanceID>0&&le()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Ll),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Il({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Xn(n.fetch),this.lock=n.lock||yn,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:le()&&((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0?void 0:t.locks)?this.lock=Nl:this.lock=yn,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:Ut()?this.storage=Al:(this.memoryStorage={},this.storage=_n(this.memoryStorage)):(this.memoryStorage={},this.storage=_n(this.memoryStorage)),le()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Qn}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=le()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:s}=await this._getSessionFromURL(e);if(s)return this._debug("#_initialize()","error detecting session from URL",s),(s==null?void 0:s.message)==="Identity is already linked"||(s==null?void 0:s.message)==="Identity is already linked to another user"?{error:s}:(await this._removeSession(),{error:s});const{session:n,redirectType:i}=t;return this._debug("#_initialize()","detected session in URL",n,"redirect type",i),await this._saveSession(n),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return j(e)?{error:e}:{error:new ti("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,n;try{await this._removeSession();const i=await N(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:Ce}),{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const c=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(j(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,s,n;try{await this._removeSession();let i;if("email"in e){const{email:u,password:d,options:f}=e;let h=null,S=null;this.flowType==="pkce"&&([h,S]=await at(this.storage,this.storageKey)),i=await N(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:d,data:(t=f==null?void 0:f.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:h,code_challenge_method:S},xform:Ce})}else if("phone"in e){const{phone:u,password:d,options:f}=e;i=await N(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},channel:(n=f==null?void 0:f.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Ce})}else throw new Rs("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const c=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(j(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{await this._removeSession();let t;if("email"in e){const{email:i,password:a,options:o}=e;t=await N(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:gn})}else if("phone"in e){const{phone:i,password:a,options:o}=e;t=await N(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:gn})}else throw new Rs("You must provide either an email or phone number and a password");const{data:s,error:n}=t;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new cr}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(t){if(j(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,n,i;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await Cs(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(t!=null?t:"").split("/"),{data:i,error:a}=await N(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Ce});return await or(this.storage,`${this.storageKey}-code-verifier`),a?{data:{user:null,session:null,redirectType:null},error:a}:!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new cr}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n!=null?n:null}),error:a})}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:s,token:n,access_token:i,nonce:a}=e,o=await N(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Ce}),{data:c,error:l}=o;return l?{data:{user:null,session:null},error:l}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new cr}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:l})}catch(t){if(j(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,n,i,a;try{if(await this._removeSession(),"email"in e){const{email:o,options:c}=e;let l=null,u=null;this.flowType==="pkce"&&([l,u]=await at(this.storage,this.storageKey));const{error:d}=await N(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:l,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:o,options:c}=e,{data:l,error:u}=await N(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new Rs("You must provide either an email or phone number.")}catch(o){if(j(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,s;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let n,i;"options"in e&&(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:a,error:o}=await N(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:Ce});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,l=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(n){if(j(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,s,n;try{await this._removeSession();let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await at(this.storage,this.storageKey)),await N(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:El})}catch(i){if(j(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Be;const{error:n}=await N(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(j(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:i}=e,{error:a}=await N(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:s,type:n,options:i}=e,{data:a,error:o}=await N(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new Rs("You must provide either an email or phone number and a type")}catch(t){if(j(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Cs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){const a=this.suppressGetSessionWarning;e=new Proxy(e,{get(c,l,u){return!a&&l==="user"&&console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),Reflect.get(c,l,u)}})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await N(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ae}):await this._useSession(async t=>{var s,n,i;const{data:a,error:o}=t;if(o)throw o;return!(!((s=a.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Be}:await N(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Ae})})}catch(t){if(j(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:n,error:i}=s;if(i)throw i;if(!n.session)throw new Be;const a=n.session;let o=null,c=null;this.flowType==="pkce"&&e.email!=null&&([o,c]=await at(this.storage,this.storageKey));const{data:l,error:u}=await N(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:c}),jwt:a.access_token,xform:Ae});if(u)throw u;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(s){if(j(s))return{data:{user:null},error:s};throw s}}_decodeJWT(e){return hn(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Be;const t=Date.now()/1e3;let s=t,n=!0,i=null;const a=hn(e.access_token);if(a.exp&&(s=a.exp,n=s<=t),n){const{session:o,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(j(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:a,error:o}=t;if(o)throw o;e=(s=a.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Be;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(j(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e){try{if(!le())throw new $s("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new $s("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new fn("Not a valid PKCE flow url.");const t=ar(window.location.href);if(e){if(!t.code)throw new fn("No code detected.");const{data:te,error:D}=await this._exchangeCodeForSession(t.code);if(D)throw D;const U=new URL(window.location.href);return U.searchParams.delete("code"),window.history.replaceState(window.history.state,"",U.toString()),{data:{session:te.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new $s(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:s,provider_refresh_token:n,access_token:i,refresh_token:a,expires_in:o,expires_at:c,token_type:l}=t;if(!i||!o||!a||!l)throw new $s("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(o);let f=u+d;c&&(f=parseInt(c));const h=f-u;h*1e3<=It&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const S=f-d;u-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,f,u):u-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",S,f,u);const{data:P,error:C}=await this._getUser(i);if(C)throw C;const z={provider_token:s,provider_refresh_token:n,access_token:i,expires_in:d,expires_at:f,refresh_token:a,token_type:l,user:P.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:z,redirectType:t.type},error:null}}catch(t){if(j(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){const e=ar(window.location.href);return!!(le()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=ar(window.location.href),t=await Cs(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:n,error:i}=t;if(i)return{error:i};const a=(s=n.session)===null||s===void 0?void 0:s.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(wl(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await or(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t=cl(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,n;try{const{data:{session:i},error:a}=t;if(a)throw a;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await at(this.storage,this.storageKey,!0));try{return await N(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(j(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(j(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:n}=await this._useSession(async i=>{var a,o,c,l,u;const{data:d,error:f}=i;if(f)throw f;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await N(this.fetch,"GET",h,{headers:this.headers,jwt:(u=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return le()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(j(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,n;const{data:i,error:a}=t;if(a)throw a;return await N(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(t){if(j(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await hl(async n=>(n>0&&await dl(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await N(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ce})),(n,i)=>{const a=200*Math.pow(2,n);return i&&lr(i)&&Date.now()+a-s<It})}catch(s){if(this._debug(t,"error",s),j(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),le()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await Cs(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const n=Math.round(Date.now()/1e3),i=((e=s.expires_at)!==null&&e!==void 0?e:1/0)<n+dn;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${dn}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),lr(a)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Be;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Qs;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new Be;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(n,"error",i),j(i)){const a={session:null,error:i};return lr(i)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await ei(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await or(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&le()&&(window==null?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),It);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno!="undefined"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/It);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${It}ms, refresh threshold is ${vn} ticks`),n<=vn&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof si)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!le()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const n=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,a]=await at(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});n.push(o.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);n.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await N(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(j(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,n;const{data:i,error:a}=t;if(a)return{data:null,error:a};const{data:o,error:c}=await N(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return c?{data:null,error:c}:(!((n=o==null?void 0:o.totp)===null||n===void 0)&&n.qr_code&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(t){if(j(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:o}=await N(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if(j(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:i}=t;return i?{data:null,error:i}:await N(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(j(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],n=s.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:s,totp:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(n.access_token);let o=null;a.aal&&(o=a.aal);let c=o;((s=(t=n.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const u=a.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}}ps.nextInstanceID=0;const Zl=ps;class Dl extends Zl{constructor(e){super(e)}}var Ul=globalThis&&globalThis.__awaiter||function(r,e,t,s){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(u){try{l(s.next(u))}catch(d){a(d)}}function c(u){try{l(s.throw(u))}catch(d){a(d)}}function l(u){u.done?i(u.value):n(u.value).then(o,c)}l((s=s.apply(r,e||[])).next())})};class Ml{constructor(e,t,s){var n,i,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const o=sl(e);this.realtimeUrl=`${o}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${o}/auth/v1`,this.storageUrl=`${o}/storage/v1`,this.functionsUrl=`${o}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,l={db:Gc,realtime:Qc,auth:Object.assign(Object.assign({},Kc),{storageKey:c}),global:Hc},u=rl(s!=null?s:{},l);this.storageKey=(n=u.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},this.auth=this._initSupabaseAuthClient((a=u.auth)!==null&&a!==void 0?a:{},this.headers,u.global.fetch),this.fetch=tl(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},u.realtime)),this.rest=new Dr(`${o}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new cc(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Fc(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Ul(this,void 0,void 0,function*(){const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,storageKey:i,flowType:a,debug:o},c,l){var u;const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Dl({url:this.authUrl,headers:Object.assign(Object.assign({},d),c),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,flowType:a,debug:o,fetch:l,hasCustomAuthorizationHeader:(u="Authorization"in this.headers)!==null&&u!==void 0?u:!1})}_initRealtimeClient(e){return new Ac(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.realtime.setAuth(s!=null?s:null),this.changedAccessToken=s):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Vl=(r,e,t)=>new Ml(r,e,t),Kl=Vl(ft.SUPABASE_URL,ft.DEV?ft.SUPABASE_SERVICE_KEY:ft.SUPABASE_ANON_KEY),bn="fr";function Ql(r,e=bn){var s,n,i;return r.length<1?"":(i=((n=(s=r.find(a=>a.language_code===e))!=null?s:r.find(a=>a.language_code===bn))!=null?n:r[0]).content)!=null?i:""}var zl=fi({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(r,{slots:e,emit:t}){const s=yi(),n=As(null);let i=0;const a=[];function o(h){const S=typeof h=="boolean"?h:r.noErrorFocus!==!0,P=++i,C=(D,U)=>{t(`validation${D===!0?"Success":"Error"}`,U)},z=D=>{const U=D.validate();return typeof U.then=="function"?U.then(H=>({valid:H,comp:D}),H=>({valid:!1,comp:D,err:H})):Promise.resolve({valid:U,comp:D})};return(r.greedy===!0?Promise.all(a.map(z)).then(D=>D.filter(U=>U.valid!==!0)):a.reduce((D,U)=>D.then(()=>z(U).then(H=>{if(H.valid===!1)return Promise.reject(H)})),Promise.resolve()).catch(D=>[D])).then(D=>{if(D===void 0||D.length===0)return P===i&&C(!0),!0;if(P===i){const{comp:U,err:H}=D[0];if(H!==void 0&&console.error(H),C(!1,U),S===!0){const Ys=D.find(({comp:$t})=>typeof $t.focus=="function"&&bi($t.$)===!1);Ys!==void 0&&Ys.comp.focus()}}return!1})}function c(){i++,a.forEach(h=>{typeof h.resetValidation=="function"&&h.resetValidation()})}function l(h){h!==void 0&&zr(h);const S=i+1;o().then(P=>{S===i&&P===!0&&(r.onSubmit!==void 0?t("submit",h):h!==void 0&&h.target!==void 0&&typeof h.target.submit=="function"&&h.target.submit())})}function u(h){h!==void 0&&zr(h),t("reset"),wi(()=>{c(),r.autofocus===!0&&r.noResetFocus!==!0&&d()})}function d(){ki(()=>{if(n.value===null)return;const h=n.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||n.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||n.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(n.value.querySelectorAll("[tabindex]"),S=>S.tabIndex!==-1);h!=null&&h.focus({preventScroll:!0})})}pi(xi,{bindComponent(h){a.push(h)},unbindComponent(h){const S=a.indexOf(h);S!==-1&&a.splice(S,1)}});let f=!1;return mi(()=>{f=!0}),gi(()=>{f===!0&&r.autofocus===!0&&d()}),xn(()=>{r.autofocus===!0&&d()}),Object.assign(s.proxy,{validate:o,resetValidation:c,submit:l,reset:u,focus:d,getValidationComponents:()=>a}),()=>_i("form",{class:"q-form",ref:n,onSubmit:l,onReset:u},vi(e.default))}});const Yl=Ti({__name:"TextInput",props:{field_label:{type:String,default:"Field Title",validator(r){return r.length<50}},initial_content:{type:String,default:""},inputProps:{type:Object,default:()=>({})}},emits:["formValidated","cancel"],setup(r,{emit:e}){const t=r,s=e,n=As(""),i=As(null);xn(()=>{n.value=t.initial_content});const a=()=>(s("formValidated",n.value),!0),o=()=>{i.value&&i.value.submit()};return(c,l)=>(Si(),Ei(Oi,null,{default:rt(()=>[nt(Ii,null,{default:rt(()=>[nt(Ci(zl),{ref_key:"form",ref:i,onSubmit:a},{default:rt(()=>[nt(Ri,$i({filled:"",modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=u=>n.value=u)},r.inputProps,{label:r.field_label,autofocus:""}),null,16,["modelValue","label"])]),_:1},512)]),_:1}),nt(Ai,{align:"around"},{default:rt(()=>[nt(Br,{color:"secondary",onClick:l[1]||(l[1]=u=>s("cancel"))},{default:rt(()=>[qr(" Cancel ")]),_:1}),nt(Br,{color:"primary",onClick:o},{default:rt(()=>[qr(" Validate ")]),_:1})]),_:1})]),_:1}))}}),Bl=()=>!0;function Xl(r){const e={};return r.forEach(t=>{e[t]=Bl}),e}var eu=(r,e)=>{const t=r.__vccOpts||r;for(const[s,n]of e)t[s]=n;return t};export{Hl as A,ft as C,zl as Q,Yl as _,eu as a,Gl as b,Xl as c,Ql as g,Kl as s,Wl as u};
